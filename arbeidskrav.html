<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="nb" xml:lang="nb"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Hanna, Inrid og Julie">

<title>Romlig analyse av boligpriser i King County</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="arbeidskrav_files/libs/clipboard/clipboard.min.js"></script>
<script src="arbeidskrav_files/libs/quarto-html/quarto.js"></script>
<script src="arbeidskrav_files/libs/quarto-html/popper.min.js"></script>
<script src="arbeidskrav_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="arbeidskrav_files/libs/quarto-html/anchor.min.js"></script>
<link href="arbeidskrav_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="arbeidskrav_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="arbeidskrav_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="arbeidskrav_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="arbeidskrav_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="arbeidskrav_files/libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">
<script src="arbeidskrav_files/libs/tabwid-1.1.3/tabwid.js"></script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Innholdsfortegnelse</h2>
   
  <ul>
  <li><a href="#introduksjon" id="toc-introduksjon" class="nav-link active" data-scroll-target="#introduksjon"><span class="header-section-number">2</span> Introduksjon</a></li>
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data"><span class="header-section-number">3</span> Data</a></li>
  <li><a href="#house-sales-in-king-county-usa" id="toc-house-sales-in-king-county-usa" class="nav-link" data-scroll-target="#house-sales-in-king-county-usa"><span class="header-section-number">4</span> House Sales in King County, USA</a>
  <ul class="collapse">
  <li><a href="#wadoh-environmental-health-disparities-index-calculated-for-king-county" id="toc-wadoh-environmental-health-disparities-index-calculated-for-king-county" class="nav-link" data-scroll-target="#wadoh-environmental-health-disparities-index-calculated-for-king-county"><span class="header-section-number">4.1</span> WADOH Environmental Health Disparities Index Calculated for King County</a></li>
  <li><a href="#cencus-shapefile-og-tracts10" id="toc-cencus-shapefile-og-tracts10" class="nav-link" data-scroll-target="#cencus-shapefile-og-tracts10"><span class="header-section-number">4.2</span> Cencus shapefile og tracts10</a></li>
  </ul></li>
  <li><a href="#exploratory-data-analysis-eda" id="toc-exploratory-data-analysis-eda" class="nav-link" data-scroll-target="#exploratory-data-analysis-eda"><span class="header-section-number">5</span> Exploratory Data Analysis (EDA)</a></li>
  <li><a href="#hedoniske-modeller" id="toc-hedoniske-modeller" class="nav-link" data-scroll-target="#hedoniske-modeller"><span class="header-section-number">6</span> Hedoniske modeller</a>
  <ul class="collapse">
  <li><a href="#regresjonstabell" id="toc-regresjonstabell" class="nav-link" data-scroll-target="#regresjonstabell"><span class="header-section-number">6.1</span> Regresjonstabell</a></li>
  </ul></li>
  <li><a href="#sammenligning-av-de-tre-modellene---hvilken-er-best" id="toc-sammenligning-av-de-tre-modellene---hvilken-er-best" class="nav-link" data-scroll-target="#sammenligning-av-de-tre-modellene---hvilken-er-best"><span class="header-section-number">7</span> Sammenligning av de tre modellene - Hvilken er best?</a>
  <ul class="collapse">
  <li><a href="#r²-og-justert-r²" id="toc-r²-og-justert-r²" class="nav-link" data-scroll-target="#r²-og-justert-r²"><span class="header-section-number">7.1</span> R² og justert R²</a></li>
  <li><a href="#aic-og-bic" id="toc-aic-og-bic" class="nav-link" data-scroll-target="#aic-og-bic"><span class="header-section-number">7.2</span> AIC og BIC</a></li>
  <li><a href="#log-likelihood" id="toc-log-likelihood" class="nav-link" data-scroll-target="#log-likelihood"><span class="header-section-number">7.3</span> Log-likelihood</a></li>
  <li><a href="#f-verdi" id="toc-f-verdi" class="nav-link" data-scroll-target="#f-verdi"><span class="header-section-number">7.4</span> F-verdi</a></li>
  <li><a href="#rmse" id="toc-rmse" class="nav-link" data-scroll-target="#rmse"><span class="header-section-number">7.5</span> RMSE</a></li>
  <li><a href="#konklusjon" id="toc-konklusjon" class="nav-link" data-scroll-target="#konklusjon"><span class="header-section-number">7.6</span> Konklusjon</a></li>
  </ul></li>
  <li><a href="#residualanalyse" id="toc-residualanalyse" class="nav-link" data-scroll-target="#residualanalyse"><span class="header-section-number">8</span> Residualanalyse</a>
  <ul class="collapse">
  <li><a href="#residuals-vs-fitted" id="toc-residuals-vs-fitted" class="nav-link" data-scroll-target="#residuals-vs-fitted"><span class="header-section-number">8.1</span> Residuals vs Fitted</a></li>
  <li><a href="#q-q-residuals" id="toc-q-q-residuals" class="nav-link" data-scroll-target="#q-q-residuals"><span class="header-section-number">8.2</span> Q-Q Residuals</a></li>
  <li><a href="#scale-location" id="toc-scale-location" class="nav-link" data-scroll-target="#scale-location"><span class="header-section-number">8.3</span> Scale-Location</a></li>
  <li><a href="#residuals-vs-leverage" id="toc-residuals-vs-leverage" class="nav-link" data-scroll-target="#residuals-vs-leverage"><span class="header-section-number">8.4</span> Residuals vs Leverage</a></li>
  <li><a href="#konklusjon-1" id="toc-konklusjon-1" class="nav-link" data-scroll-target="#konklusjon-1"><span class="header-section-number">8.5</span> Konklusjon</a></li>
  </ul></li>
  <li><a href="#simultan-test-på-tids-dummiene" id="toc-simultan-test-på-tids-dummiene" class="nav-link" data-scroll-target="#simultan-test-på-tids-dummiene"><span class="header-section-number">9</span> Simultan test på tids-dummiene</a>
  <ul class="collapse">
  <li><a href="#model-1" id="toc-model-1" class="nav-link" data-scroll-target="#model-1"><span class="header-section-number">9.1</span> Model 1</a></li>
  <li><a href="#modell-2" id="toc-modell-2" class="nav-link" data-scroll-target="#modell-2"><span class="header-section-number">9.2</span> Modell 2</a></li>
  <li><a href="#modell-3" id="toc-modell-3" class="nav-link" data-scroll-target="#modell-3"><span class="header-section-number">9.3</span> Modell 3</a></li>
  </ul></li>
  <li><a href="#spatial-regressions" id="toc-spatial-regressions" class="nav-link" data-scroll-target="#spatial-regressions"><span class="header-section-number">10</span> Spatial Regressions</a></li>
  <li><a href="#ols-modell-og-spatial-effects" id="toc-ols-modell-og-spatial-effects" class="nav-link" data-scroll-target="#ols-modell-og-spatial-effects"><span class="header-section-number">11</span> OLS-modell og “Spatial effects”</a></li>
  <li><a href="#anselin" id="toc-anselin" class="nav-link" data-scroll-target="#anselin"><span class="header-section-number">12</span> Anselin</a>
  <ul class="collapse">
  <li><a href="#langrange-multiplikator-test-for-3-nærmeste-naboer" id="toc-langrange-multiplikator-test-for-3-nærmeste-naboer" class="nav-link" data-scroll-target="#langrange-multiplikator-test-for-3-nærmeste-naboer"><span class="header-section-number">12.1</span> Langrange multiplikator test for 3 nærmeste naboer</a></li>
  <li><a href="#langrange-multiplikator-test-for-10-nærmeste-naboer" id="toc-langrange-multiplikator-test-for-10-nærmeste-naboer" class="nav-link" data-scroll-target="#langrange-multiplikator-test-for-10-nærmeste-naboer"><span class="header-section-number">12.2</span> Langrange multiplikator test for 10 nærmeste naboer</a></li>
  <li><a href="#konklusjon-2" id="toc-konklusjon-2" class="nav-link" data-scroll-target="#konklusjon-2"><span class="header-section-number">12.3</span> Konklusjon</a></li>
  <li><a href="#sar" id="toc-sar" class="nav-link" data-scroll-target="#sar"><span class="header-section-number">12.4</span> SAR</a></li>
  </ul></li>
  <li><a href="#lesage" id="toc-lesage" class="nav-link" data-scroll-target="#lesage"><span class="header-section-number">13</span> LeSage</a>
  <ul class="collapse">
  <li><a href="#lokalt-eller-globalt-fenomen" id="toc-lokalt-eller-globalt-fenomen" class="nav-link" data-scroll-target="#lokalt-eller-globalt-fenomen"><span class="header-section-number">13.1</span> Lokalt eller globalt fenomen?</a></li>
  <li><a href="#sdem" id="toc-sdem" class="nav-link" data-scroll-target="#sdem"><span class="header-section-number">13.2</span> SDEM</a></li>
  <li><a href="#sem" id="toc-sem" class="nav-link" data-scroll-target="#sem"><span class="header-section-number">13.3</span> SEM</a></li>
  <li><a href="#slx" id="toc-slx" class="nav-link" data-scroll-target="#slx"><span class="header-section-number">13.4</span> SLX</a></li>
  <li><a href="#testing-og-sammenligning-av-de-ulike-modellene" id="toc-testing-og-sammenligning-av-de-ulike-modellene" class="nav-link" data-scroll-target="#testing-og-sammenligning-av-de-ulike-modellene"><span class="header-section-number">13.5</span> Testing og sammenligning av de ulike modellene</a></li>
  </ul></li>
  <li><a href="#fjerner-modellene-spatial-effects" id="toc-fjerner-modellene-spatial-effects" class="nav-link" data-scroll-target="#fjerner-modellene-spatial-effects"><span class="header-section-number">14</span> Fjerner modellene “spatial effects”?</a>
  <ul class="collapse">
  <li><a href="#sem-modellen-spatial-error-model" id="toc-sem-modellen-spatial-error-model" class="nav-link" data-scroll-target="#sem-modellen-spatial-error-model"><span class="header-section-number">14.1</span> SEM-modellen (Spatial Error Model)</a></li>
  <li><a href="#sdem-modellen-spatial-durbin-error-model" id="toc-sdem-modellen-spatial-durbin-error-model" class="nav-link" data-scroll-target="#sdem-modellen-spatial-durbin-error-model"><span class="header-section-number">14.2</span> SDEM-modellen (Spatial Durbin Error Model)</a></li>
  <li><a href="#slx-modellen-spatial-lag-of-x-model" id="toc-slx-modellen-spatial-lag-of-x-model" class="nav-link" data-scroll-target="#slx-modellen-spatial-lag-of-x-model"><span class="header-section-number">14.3</span> SLX-modellen (Spatial Lag of X Model)</a></li>
  </ul></li>
  <li><a href="#diskusjon-av-resultatene" id="toc-diskusjon-av-resultatene" class="nav-link" data-scroll-target="#diskusjon-av-resultatene"><span class="header-section-number">15</span> Diskusjon av resultatene</a>
  <ul class="collapse">
  <li><a href="#økonomisk-tolkning-av-den-hedoniske-boligprismodellen" id="toc-økonomisk-tolkning-av-den-hedoniske-boligprismodellen" class="nav-link" data-scroll-target="#økonomisk-tolkning-av-den-hedoniske-boligprismodellen"><span class="header-section-number">15.1</span> Økonomisk tolkning av den hedoniske boligprismodellen</a></li>
  <li><a href="#i-ols-modellen-kan-vi-tolke-to-utvalgte-koeffisienter-med-tanke-på-den-hedoniske-teorien" id="toc-i-ols-modellen-kan-vi-tolke-to-utvalgte-koeffisienter-med-tanke-på-den-hedoniske-teorien" class="nav-link" data-scroll-target="#i-ols-modellen-kan-vi-tolke-to-utvalgte-koeffisienter-med-tanke-på-den-hedoniske-teorien"><span class="header-section-number">15.2</span> I OLS-modellen kan vi tolke to utvalgte koeffisienter med tanke på den hedoniske teorien</a></li>
  <li><a href="#i-sdem-modellen-kan-vi-tolke-to-utvalgte-koeffisienter-med-tanke-på-den-hedoniske-teorien" id="toc-i-sdem-modellen-kan-vi-tolke-to-utvalgte-koeffisienter-med-tanke-på-den-hedoniske-teorien" class="nav-link" data-scroll-target="#i-sdem-modellen-kan-vi-tolke-to-utvalgte-koeffisienter-med-tanke-på-den-hedoniske-teorien"><span class="header-section-number">15.3</span> I SDEM-modellen kan vi tolke to utvalgte koeffisienter med tanke på den hedoniske teorien</a></li>
  <li><a href="#i-sem-spatial-error-model-kan-vi-tolke-to-utvalgte-koeffisienter-med-tanke-på-den-hedoniske-teorien" id="toc-i-sem-spatial-error-model-kan-vi-tolke-to-utvalgte-koeffisienter-med-tanke-på-den-hedoniske-teorien" class="nav-link" data-scroll-target="#i-sem-spatial-error-model-kan-vi-tolke-to-utvalgte-koeffisienter-med-tanke-på-den-hedoniske-teorien"><span class="header-section-number">15.4</span> I SEM (Spatial Error Model) kan vi tolke to utvalgte koeffisienter med tanke på den hedoniske teorien</a>
  <ul class="collapse">
  <li><a href="#i-slx-spatial-lag-of-x-modellen-kan-vi-tolke-to-utvalgte-koeffisienter-med-tanke-på-den-hedoniske-teorien" id="toc-i-slx-spatial-lag-of-x-modellen-kan-vi-tolke-to-utvalgte-koeffisienter-med-tanke-på-den-hedoniske-teorien" class="nav-link" data-scroll-target="#i-slx-spatial-lag-of-x-modellen-kan-vi-tolke-to-utvalgte-koeffisienter-med-tanke-på-den-hedoniske-teorien"><span class="header-section-number">15.4.1</span> I SLX (Spatial Lag of X) modellen kan vi tolke to utvalgte koeffisienter med tanke på den hedoniske teorien</a></li>
  </ul></li>
  <li><a href="#ut-fra-resultatene-for-sar-modellen-kan-vi-tolke-de-implisitte-prisene-for-to-utvalgte-variabler.-vi-tar-for-oss-variablene-sqft_living-boareal-og-bedrooms-antall-soverom." id="toc-ut-fra-resultatene-for-sar-modellen-kan-vi-tolke-de-implisitte-prisene-for-to-utvalgte-variabler.-vi-tar-for-oss-variablene-sqft_living-boareal-og-bedrooms-antall-soverom." class="nav-link" data-scroll-target="#ut-fra-resultatene-for-sar-modellen-kan-vi-tolke-de-implisitte-prisene-for-to-utvalgte-variabler.-vi-tar-for-oss-variablene-sqft_living-boareal-og-bedrooms-antall-soverom."><span class="header-section-number">15.5</span> Ut fra resultatene for SAR-modellen kan vi tolke de implisitte prisene for to utvalgte variabler. Vi tar for oss variablene sqft_living (boareal) og bedrooms (antall soverom).</a></li>
  </ul></li>
  <li><a href="#konklusjon-3" id="toc-konklusjon-3" class="nav-link" data-scroll-target="#konklusjon-3"><span class="header-section-number">16</span> Konklusjon</a></li>
  <li><a href="#referanser" id="toc-referanser" class="nav-link" data-scroll-target="#referanser"><span class="header-section-number">17</span> Referanser</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Andre formater</h2><ul><li><a href="arbeidskrav.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Romlig analyse av boligpriser i King County</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Forfatter</div>
    <div class="quarto-title-meta-contents">
             <p>Hanna, Inrid og Julie </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="introduksjon" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Introduksjon</h1>
<p>I denne oppgaven skal vi analysere boligmarkedet i King County i USA, med fokus på ulike faktorer som påvirker boligprisene. Først vil vi gjennomføre en <em>Exploratory Data Analysis (EDA)</em> i GeoDa for å undersøke romlig autokorrelasjon mellom pris og boareal, samt forsøke å kartlegge hvor ulike boligtyper er lokalisert. Videre i oppgaven vil vi estimere tre ulike hedoniske prismodeller for å undersøke hvordan både huskarkateristika og områdespesifikke variabler påvirker salgsprisene. Videre vil vi fastslå «spatial effects» og fortsette med «spatial regressions» for å forsøke å forstå hvordan geografiske forskjeller og nabolagskarakteristika bidrar til variasjoner i boligpriser. Vi skal bruke metodene til både <span class="citation" data-cites="anselin1988">Anselin (<a href="#ref-anselin1988" role="doc-biblioref">1988</a>)</span> og <span class="citation" data-cites="lesage">LeSage (<a href="#ref-lesage" role="doc-biblioref">u.å.</a>)</span> for å fastslå hvilken romlig regresjonsmodell som best fanger opp de romlige effektene.<br>
</p>
</section>
<section id="data" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Data</h1>
</section>
<section id="house-sales-in-king-county-usa" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> House Sales in King County, USA</h1>
<p>Det første datasettet vi har brukt i oppgaven er <em>House Sales in King County, USA</em> fra Kaggle. Datasettet inneholder rundt 27 000 observasjoner med detaljerte variabler som beskriver ulike egenskaper ved de solgte boligene. I tillegg inneholder datasettet salgspris og geografiske koordinater for hver observasjon. Variablene gir en omfattende innsikt i både boligkarakteristika og salgsdetaljer for perioden 2014-2015. Vi la til en variabel som angir avstand i km til CBD i Seattle og endret kartprojeksjonen til EPSG 2926.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Laste inn House Sales King County datasett</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>kc_house_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"MandD/kc_house_data.csv"</span>, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sorter salgene «descending» etter dato</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Velge siste salg der vi har multiple salg av samme eiendom</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>kc_house_data <span class="ot">&lt;-</span> kc_house_data <span class="sc">%&gt;%</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(           </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">year =</span> <span class="fu">year</span>(date),</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">month =</span> <span class="fu">month</span>(date),</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">day =</span> <span class="fu">day</span>(date)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(date)) <span class="sc">%&gt;%</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(id, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Konvertere kc_house_data til et sf-objekt</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Projeksjon: EPSG:4326</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>kc_house_data <span class="ot">&lt;-</span> kc_house_data <span class="sc">%&gt;%</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_as_sf</span>(<span class="at">coords =</span> <span class="fu">c</span>(<span class="st">"long"</span>, <span class="st">"lat"</span>), <span class="at">crs =</span> <span class="dv">4326</span>)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Projeksjon: EPSG:2926</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>kc_house_data <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(kc_house_data, <span class="at">crs =</span> <span class="dv">2926</span>)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Opprette punkt for CBD i Seattle</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>seattle_cbd <span class="ot">&lt;-</span> <span class="fu">st_point</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="fl">122.3321</span>, <span class="fl">47.6062</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_sfc</span>(<span class="at">crs =</span> <span class="dv">4326</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_transform</span>(<span class="at">crs =</span> <span class="dv">2926</span>) <span class="co"># Projeksjon: EPSG:2926</span></span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Finn avstanden fra CBD til hvert hus</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>kc_house_data <span class="ot">&lt;-</span> kc_house_data <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dist_cbd =</span> <span class="fu">set_units</span>(<span class="fu">st_distance</span>(geometry, seattle_cbd), <span class="st">"km"</span>))</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ordne rekkefølge på variabler</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>kc_house_data <span class="ot">&lt;-</span> kc_house_data <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, date, year, month, day, geometry, zipcode, price, dist_cbd, floors,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>         bedrooms, bathrooms, sqft_living, sqft_living15, sqft_lot, sqft_lot15,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>         sqft_above, sqft_basement, yr_built, yr_renovated, condition, </span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>         grade, view,waterfront )</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="wadoh-environmental-health-disparities-index-calculated-for-king-county" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="wadoh-environmental-health-disparities-index-calculated-for-king-county"><span class="header-section-number">4.1</span> WADOH Environmental Health Disparities Index Calculated for King County</h2>
<p>I datsettet <em>House Sales in King County, USA</em> fra Kaggle mangler det variabler som beskriver området hvor boligene ligger. Denne informasjonen henter vi fra datasettet <em>WADOH Environmental Health Disparities Index calculated for King County</em>, utarbeidet av Washington State Department of Health. Datasettet inneholder en EHD-indeks, og de variablene som denne indeksen er utarbeidet fra, for alle “cencus tracts” i King County. Vi endret også projeksjonen på dette kartet til EPSG 2926.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Laste inn WADOH King County datasett</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>kc_wadoh_map <span class="ot">&lt;-</span> <span class="fu">st_read</span>(</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">dsn =</span> <span class="st">"MandD/WADOH_Environmental_Health_Disparities_Index_Calculated_for_King_County___wadohehdindex_area"</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">quiet =</span> <span class="cn">TRUE</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plukke ut variabler</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a> kc_wadoh_map <span class="ot">&lt;-</span> kc_wadoh_map <span class="sc">%&gt;%</span> </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">GEOIDTRT =</span> GEO_ID_TRT,</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  EHD_percen,<span class="co">#Environmental Health Index, weighted score many vars</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  linguist_2,<span class="co">#Pop. age 5+ speaking English less than "very well"</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  poverty_pe,<span class="co">#Percentage people living in poverty</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  transporta,<span class="co">#% of income spent on transportation median family in tract</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  unemploy_2,<span class="co">#percentage unemployed</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  housing_pe,<span class="co">#% of households in group "Unaffordable Housing" (&gt;30% inc.)</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>  traffic_pe,<span class="co">#% of pop. near heavy traffic roadways</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>  diesel,<span class="co"># nox consentration</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>  ozone,<span class="co"># ozone consentration</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>  PM25, <span class="co"># consentration of Particulate Matter in air</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>  toxic_rele, <span class="co"># Toxic release from factories</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>  hazardous_, <span class="co"># Hazardous Waste Treatment Storage and disposal Facilities</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>  lead_perce, <span class="co"># measure of Lead paint in houses</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>  superfund, <span class="co"># Proximity to contaminated sites on national list</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>  facilities, <span class="co"># Proximity to Risk Management Plan Facilities</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>  wastewater, <span class="co"># Proximity to wastewater facilities</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>  sen_pop_pe, <span class="co"># % pop. over 65</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>  socio_perc <span class="co"># score social economic determants, low best</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Projeksjon: EPSG:2926</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>kc_wadoh_map <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(kc_wadoh_map, <span class="at">crs =</span> <span class="dv">2926</span>)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="cencus-shapefile-og-tracts10" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="cencus-shapefile-og-tracts10"><span class="header-section-number">4.2</span> Cencus shapefile og tracts10</h2>
<p>Vi benyttet også flere datasett fra en cencus shapefil for King County, utarbeidet av King County GIS. Vi hentet data om samlet familie inntekt fra datafilen <em>acs_b19101_familyincome.dbf</em> og opplysninger om etnisitet fra datasettet <em>acs_b02001_race.dbf.</em> Disse to datasettene gir informasjon om familie inntekt og etnisitet på “cencus-tracts”-nivå. Vi brukte disse to datasettene til å lage variabler som vi la til i WADOH-datasettet. Fra cencus shapefilen lastet vi også ned kartet <em>tracts10</em>. Vi la variablene fra WADOH-datasettet in i <em>tracts10</em>. Videre gjorde vi en spatial join med hus-datene fra Kaggle for å binde områdevariablene til de respektive boligene. Vi benyttet projeksjonen EPSG 2926 for alle kartene.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Laste inn datasett for inntekt</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>income <span class="ot">&lt;-</span> <span class="fu">read.dbf</span>(<span class="st">"MandD/acs_b19101_familyincome.dbf"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># select(-M19101153, - M19101152, - M19101151, - M19101150,- M19101149, - M19101148, -</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#          M19101147,- M19101146, - M19101145, - M19101144,- M19101143, - M19101142, -</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">#          M19101141, - M19101140, - M19101139, - M19101138, - M19101137</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">#        )</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ag: sparer litt skriving</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!</span><span class="fu">starts_with</span>(<span class="st">"M"</span>))</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Gruppere inntekt: low, mid, high</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>income <span class="ot">&lt;-</span> income <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Lag nye kolonner for inntektsgruppene med ønskede navn</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">low_income =</span> E19101138 <span class="sc">+</span>   <span class="co"># Less than $10,000</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>          E19101139 <span class="sc">+</span>   <span class="co"># $10,000 to $14,999</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>          E19101140 <span class="sc">+</span>   <span class="co"># $15,000 to $19,999</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>          E19101141 <span class="sc">+</span>   <span class="co"># $20,000 to $24,999</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>          E19101142 <span class="sc">+</span>   <span class="co"># $25,000 to $29,999</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>          E19101143,    <span class="co"># $30,000 to $34,999</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">mid_income =</span> E19101144 <span class="sc">+</span>   <span class="co"># $35,000 to $39,999</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>          E19101145 <span class="sc">+</span>   <span class="co"># $40,000 to $44,999</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>          E19101146 <span class="sc">+</span>   <span class="co"># $45,000 to $49,999</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>          E19101147 <span class="sc">+</span>   <span class="co"># $50,000 to $59,999</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>          E19101148 <span class="sc">+</span>   <span class="co"># $60,000 to $74,999</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>          E19101149,    <span class="co"># $75,000 to $99,999</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">high_income =</span> E19101150 <span class="sc">+</span>   <span class="co"># $100,000 to $124,999</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>           E19101151 <span class="sc">+</span>   <span class="co"># $125,000 to $149,999</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>           E19101152 <span class="sc">+</span>   <span class="co"># $150,000 to $199,999</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>           E19101153     <span class="co"># $200,000 or more</span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(GEOID, GEOIDTRT, TRACTLABEL, low_income, mid_income, high_income)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Laste inn datasett for rase</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>race <span class="ot">&lt;-</span> <span class="fu">read.dbf</span>(<span class="st">"MandD/acs_b02001_race.dbf"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># select(-M02001001, -M02001002, -M02001003, -M02001004, -M02001005, -M02001006,</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#        -M02001007, -M02001008, -M02001009, -M02001010</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">#        ) </span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!</span><span class="fu">starts_with</span>(<span class="st">"M"</span>))</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Slå sammen rase variabler</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>race <span class="ot">&lt;-</span> race <span class="sc">%&gt;%</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">total =</span> E02001001,</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">hvit_alene =</span> E02001002,</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">svart_alene =</span> E02001003,</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">asiatisk_alene =</span> E02001005,</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">andre_alene =</span> E02001004 <span class="sc">+</span> E02001006 <span class="sc">+</span> E02001007,</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">blandet =</span> E02001008 <span class="sc">+</span> E02001009 <span class="sc">+</span> E02001010</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(GEOID, GEOIDTRT, TRACTLABEL, total, hvit_alene, svart_alene, asiatisk_alene, </span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>         andre_alene, blandet)</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Beregne andeler for rase</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>race <span class="ot">&lt;-</span> race <span class="sc">%&gt;%</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">andel_hvit_alene =</span> hvit_alene <span class="sc">/</span> total,</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">andel_svart_alene =</span> svart_alene <span class="sc">/</span> total,</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">andel_asiatisk_alene =</span> asiatisk_alene <span class="sc">/</span> total,</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">andel_andre_alene =</span> andre_alene <span class="sc">/</span> total,</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">andel_blandet =</span> blandet <span class="sc">/</span> total</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(GEOID, GEOIDTRT, TRACTLABEL,</span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>         andel_hvit_alene, andel_svart_alene,</span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>         andel_asiatisk_alene, andel_andre_alene,</span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>         andel_blandet)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Legge inntekt variabler og rase variabler til i kc_wadoh_map </span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co"># income_race &lt;- income %&gt;%</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co">#   left_join(race, by = c("GEOID", "GEOIDTRT", "TRACTLABEL"))</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="co"># kc_wadoh_map &lt;- kc_wadoh_map %&gt;</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co">#   left_join(income_race, by = "GEOIDTRT")</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co"># ag: eller kanskje litt mer lettvindt</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>kc_wadoh_map <span class="ot">&lt;-</span> kc_wadoh_map <span class="sc">|&gt;</span> </span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ag: Dropper GEOID og TRACTLABEL fra race siden disse også er i income</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="fu">select</span>(race, <span class="sc">-</span>GEOID, <span class="sc">-</span>TRACTLABEL), <span class="at">by =</span> <span class="fu">join_by</span>(GEOIDTRT)) <span class="sc">|&gt;</span> </span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(income, <span class="at">by =</span> <span class="fu">join_by</span>(GEOIDTRT))</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Laste inn tracts10 datasett</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co"># tracts10 &lt;- st_read("MandD/tracts10") %&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co">#   rename("GEOIDTRT" = "GEO_ID_TRT")</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co"># ag: OK, men trengs ikke. Se bruk av den nye funksjonen join_by() nedenfor</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>tracts10 <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">"MandD/tracts10"</span>, <span class="at">quiet =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(<span class="fu">st_drop_geometry</span>(kc_wadoh_map), <span class="at">by =</span> <span class="fu">join_by</span>(GEO_ID_TRT <span class="sc">==</span> GEOIDTRT))</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Projeksjon: EPSG:2926</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>tracts10 <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(tracts10, <span class="at">crs =</span> <span class="dv">2926</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>kc_house_data <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(kc_house_data, <span class="at">crs =</span> <span class="dv">2926</span>)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Spatial join mellom husdata og tracts10</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>tracts10_join <span class="ot">&lt;-</span> <span class="fu">st_join</span>(kc_house_data, tracts10)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fjerner observasjoner med NA-verdier i områdevariablene</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>tracts10_join <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(tracts10_join)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Lag year_month som en faktor-variabel</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>tracts10_join <span class="ot">&lt;-</span> tracts10_join <span class="sc">%&gt;%</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_month =</span> <span class="fu">as.factor</span>(<span class="fu">format</span>(date, <span class="st">"%Y-%m"</span>)))</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Lagre som .gpkg</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">st_write</span>(tracts10_join, <span class="st">"house_data.gpkg"</span>, <span class="at">append=</span><span class="cn">FALSE</span>, <span class="at">quiet =</span> <span class="cn">TRUE</span>)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="exploratory-data-analysis-eda" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Exploratory Data Analysis (EDA)</h1>
<p>Vi har gjennomført en Exploratory Data Analysis (EDA) av dataene i Geoda. Her har vi generert en vektfil ut fra 3 og 10 nærmeste naboer og brukt <em>Bivariate Moran`s I</em> til å undersøke romlig autokorrelasjon mellom pris og boareal (sqft_living). Vi har også brukt <em>Bivariate Local Morans I</em> for å finne ut hvor de små og dyre, store og dyre, billige og store, og de små og billige boligene ligger.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"images/Skjermbilde 2024-11-05 kl. 11.11.56.png"</span>)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-1" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/Skjermbilde%202024-11-05%20kl.%2011.11.56.png" class="img-fluid figure-img" width="716">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figur&nbsp;1: Bivariate Moran’s I for pris og boareal (sqft_living) med 3 og 10 nærmeste naboer
</figcaption>
</figure>
</div>
</div>
</div>
<p>I <a href="#fig-1" class="quarto-xref">Figur&nbsp;1</a> ovenfor ser vi at Bivariate Moran’s I har en verdi på 0.406 for de 3 nærmeste naboene og en noe lavere verdi på 0.353 når vi utvidet til de 10 nærmeste naboene. Begge verdiene er positive, noe som indikerer en romlig autokorrelasjon mellom pris og boareal (sqft_living). Dette innebærer at boliger med høy pris har en tendens til å ligge nær andre boliger med høyt boareal, mens boliger med lav pris har en tendens til å ligge nær boliger med lavt boareal. At autokorrelasjonen avtar noe når vi utvider antall naboer, kan tyde på at sammenhengen mellom pris og boareal er sterkest lokalt. Dette antyder at relasjonen mellom pris og boareal er mer markant i nærområder, men svekkes over lengre avstander.</p>
<div id="fig-2" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/Skjermbilde%202024-11-05%20kl.%2012.04.41.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figur&nbsp;2: Bivariate Local Moran’s I for pris og boareal (sqft_living) med 3 og 10 nærmeste naboer illustrert ved LISA Cluster map
</figcaption>
</figure>
</div>
<p>I <a href="#fig-2" class="quarto-xref">Figur&nbsp;2</a> har vi brukt <em>Bivariate Local Morans I</em> for å finne ut hvor de små og dyre, store og dyre, store og billige, og de små og billige boligene ligger. Dette illustreres ved hjelp av et LISA cluster map. Kartet til venstre viser fordelingen for 3 nærmeste naboer, mens kartet til høyre viser fordelingen for 10 nærmeste naboer. De to kartene er relativt like og vi kan se lignende mønster. Ut i fra disse kartene er det tydelig at for både 3 og 10 nærmeste naboer er store og dyre boliger er konsentrert nord i King County, det samme gjelder for små og dyre boliger. Dette reflekterer “hot spots” hvor dyre boliger samles. Det kommer også frem fra kartene at det er flere store og dyre boliger enn det er små og dyre boliger. Når det kommer til billige boliger, er disse mer jevnt fordelt enn de dyre. Sør i King County er det overvekt av billige boliger. Store og billige, samt små og billige boliger er utbredt i sør, noe som kan tyde på “cold spots” hvor fattige eller mindre attraktive nabolag er utbredt.</p>
</section>
<section id="hedoniske-modeller" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Hedoniske modeller</h1>
<p>Hedoniske modeller brukes for å estimere boligpriser basert på spesifikke egenskaper som boligens størrelse, beliggenhet, nærhet til fasiliteter, samt miljømessige kvaliteter som luftkvalitet og støy. Ved å analysere hvordan disse faktorene påvirker salgspriser, kan vi finne den implisitte prisen av hver egenskap. Vi skal i dette kapittelet definere tre hedoniske modeller.</p>
<p>Den første modellen er en null modell med bare huskarakteristika og tids-dummier. Den andre modellen inkluderer huskarakteristika, distanse til CBD, relevante tract-variabler (transport og poverty) og tids-dummier. Den tredje modellen inkluderer huskarakteristika, distanse til CBD, EHD indeks og tids-dummier.</p>
<p><span id="eq-mod1"><span class="math display">\[
\begin{aligned}
P_i &amp;= \beta_0 + \beta_1 \cdot \text{bedrooms}_i + \beta_2 \cdot \text{bathrooms}_i + \beta_3 \cdot \text{sqft\_living}_i + \beta_4 \cdot \text{sqft\_lot}_i \\
&amp;+ \beta_5 \cdot \text{floors}_i + \beta_6 \cdot \text{year\_month}_i + \epsilon_i
\end{aligned}
\tag{1}\]</span></span></p>
<p><span id="eq-mod2"><span class="math display">\[
\begin{aligned}
P_i &amp;= \beta_0 + \beta_1 \cdot \text{bedrooms}_i + \beta_2 \cdot \text{bathrooms}_i + \beta_3 \cdot \text{sqft\_living}_i + \beta_4 \cdot \text{sqft\_lot}_i \\
&amp;+ \beta_5 \cdot \text{floors}_i + \beta_6 \cdot \text{distCBD}_i + \beta_7 \cdot \text{transport}_i + \beta_8 \cdot \text{poverty}_i \\
&amp;+ \beta_{9j} \cdot \text{year\_month}_i + \epsilon_i
\end{aligned}
\tag{2}\]</span></span></p>
<p><span id="eq-mod3"><span class="math display">\[
\begin{aligned}
P_i &amp;= \beta_0 + \beta_1 \cdot \text{bedrooms}_i + \beta_2 \cdot \text{bathrooms}_i + \beta_3 \cdot \text{sqft\_living}_i + \beta_4 \cdot \text{sqft\_lot}_i \\
&amp;+ \beta_5 \cdot \text{floors}_i + \beta_6 \cdot \text{distCBD}_i + \beta_7 \cdot \text{EHDindex}_i \\
&amp;+ \beta_8 \cdot \text{year\_month}_i + \epsilon_i
\end{aligned}
\tag{3}\]</span></span></p>
<p>ag: Ovenfor i uttrykkene <a href="#eq-mod1" class="quarto-xref">Ligning&nbsp;1</a>, <a href="#eq-mod2" class="quarto-xref">Ligning&nbsp;2</a> og <a href="#eq-mod3" class="quarto-xref">Ligning&nbsp;3</a> er gjengitt de tre modellene vi vil bruke.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>model1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(price <span class="sc">~</span> bedrooms <span class="sc">+</span> bathrooms <span class="sc">+</span> sqft_living <span class="sc">+</span> sqft_lot <span class="sc">+</span> floors <span class="sc">+</span> year_month, <span class="at">data =</span> tracts10_join)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>model2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(price <span class="sc">~</span> bedrooms <span class="sc">+</span> bathrooms <span class="sc">+</span> sqft_living <span class="sc">+</span> sqft_lot <span class="sc">+</span> floors <span class="sc">+</span> dist_cbd[, <span class="dv">1</span>] <span class="sc">+</span> transporta <span class="sc">+</span> poverty_pe <span class="sc">+</span> year_month, <span class="at">data =</span> tracts10_join)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>model3 <span class="ot">&lt;-</span> <span class="fu">lm</span>(price <span class="sc">~</span> bedrooms <span class="sc">+</span> bathrooms <span class="sc">+</span> sqft_living <span class="sc">+</span> sqft_lot <span class="sc">+</span> floors <span class="sc">+</span> dist_cbd[, <span class="dv">1</span>] <span class="sc">+</span> EHD_percen <span class="sc">+</span> year_month, <span class="at">data =</span> tracts10_join)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="regresjonstabell" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="regresjonstabell"><span class="header-section-number">6.1</span> Regresjonstabell</h2>
<div class="cell" data-ft.arraystretch="1.2">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ag: ingen grunn til å gjenta disse</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="co"># model1 &lt;- lm(price ~ bedrooms + bathrooms + sqft_living + sqft_lot + floors + year_month, data = tracts10_join)</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co"># model2 &lt;- lm(price ~ bedrooms + bathrooms + sqft_living + sqft_lot + floors + dist_cbd[, 1] + transporta + poverty_pe + year_month, data = tracts10_join)</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="co"># model3 &lt;- lm(price ~ bedrooms + bathrooms + sqft_living + sqft_lot + floors + dist_cbd[, 1] + EHD_percen + year_month, data = tracts10_join)</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Modell 1</span><span class="st">`</span> <span class="ot">=</span> model1, </span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Modell 2</span><span class="st">`</span> <span class="ot">=</span> model2,</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Modell 3</span><span class="st">`</span> <span class="ot">=</span> model3</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>  ), </span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">statistic =</span> <span class="st">"statistic"</span>,</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">stars =</span> <span class="cn">TRUE</span>,</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># noen rapporterer standard errors i parentes under</span></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">notes =</span> <span class="st">"Tallene i parentes er t-verdier."</span>,</span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">output =</span> <span class="st">"flextable"</span></span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autofit</span>() <span class="sc">|&gt;</span> </span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">width</span>(<span class="at">j =</span> <span class="dv">1</span>, <span class="at">width =</span> <span class="dv">2</span>) <span class="sc">|&gt;</span> </span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_booktabs</span>() <span class="sc">|&gt;</span> </span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a><span class="fu">line_spacing</span>(<span class="at">space =</span> <span class="fl">0.3</span>, <span class="at">part =</span> <span class="st">"body"</span>)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="tbl-1" class="cell quarto-float anchored" data-ft.arraystretch="1.2">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabell&nbsp;1: Regresjonstabell for de tre ulike hedoniske modellene
</figcaption>
<div aria-describedby="tbl-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-ea2b3df4{}.cl-ea1a21f4{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-ea287920{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-ea28792a{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 0.3;background-color:transparent;}.cl-ea288abe{width:2in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288ac8{width:1.237in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288ac9{width:1.271in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288aca{width:2in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288ad2{width:1.237in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288ad3{width:1.271in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288ad4{width:2in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288adc{width:1.237in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288add{width:1.271in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288ade{width:2in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288ae6{width:1.237in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288af0{width:1.271in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288af1{width:2in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288af2{width:1.237in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288afa{width:1.271in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288afb{width:2in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288afc{width:1.237in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288b04{width:1.271in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288b05{width:2in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288b06{width:1.237in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288b0e{width:1.271in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288b18{width:2in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288b22{width:1.237in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288b23{width:1.271in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288b2c{width:2in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288b36{width:1.237in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288b37{width:1.271in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288b38{width:2in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288b40{width:1.237in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288b41{width:1.271in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288b42{width:2in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288b4a{width:1.237in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288b4b{width:1.271in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288b54{width:2in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288b5e{width:1.237in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288b5f{width:1.271in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288b60{width:2in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288b68{width:1.237in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288b72{width:1.271in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288b73{width:2in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288b7c{width:1.237in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288b7d{width:1.271in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288b7e{width:2in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288b86{width:1.237in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288b87{width:1.271in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288b90{width:2in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288b91{width:1.237in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288b92{width:1.271in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288b9a{width:2in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288ba4{width:1.237in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288ba5{width:1.271in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288bae{width:2in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288baf{width:1.237in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288bb8{width:1.271in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288bb9{width:2in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288bc2{width:1.237in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288bc3{width:1.271in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288bcc{width:2in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288bcd{width:1.237in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288bce{width:1.271in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288bd6{width:2in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288bd7{width:1.237in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ea288be0{width:1.271in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-ea2b3df4"><thead><tr style="overflow-wrap:break-word;"><th class="cl-ea288abe"><p class="cl-ea287920"><span class="cl-ea1a21f4"> </span></p></th><th class="cl-ea288ac8"><p class="cl-ea287920"><span class="cl-ea1a21f4">Modell 1</span></p></th><th class="cl-ea288ac9"><p class="cl-ea287920"><span class="cl-ea1a21f4">Modell 2</span></p></th><th class="cl-ea288ac9"><p class="cl-ea287920"><span class="cl-ea1a21f4">Modell 3</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-ea288aca"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(Intercept)</span></p></td><td class="cl-ea288ad2"><p class="cl-ea28792a"><span class="cl-ea1a21f4">79893.490***</span></p></td><td class="cl-ea288ad3"><p class="cl-ea28792a"><span class="cl-ea1a21f4">845500.071***</span></p></td><td class="cl-ea288ad3"><p class="cl-ea28792a"><span class="cl-ea1a21f4">405315.746***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288ad4"><p class="cl-ea28792a"><span class="cl-ea1a21f4"></span></p></td><td class="cl-ea288adc"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(8.118)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(31.295)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(45.066)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288ade"><p class="cl-ea28792a"><span class="cl-ea1a21f4">bedrooms</span></p></td><td class="cl-ea288ae6"><p class="cl-ea28792a"><span class="cl-ea1a21f4">-59606.355***</span></p></td><td class="cl-ea288af0"><p class="cl-ea28792a"><span class="cl-ea1a21f4">-49195.378***</span></p></td><td class="cl-ea288af0"><p class="cl-ea28792a"><span class="cl-ea1a21f4">-46342.134***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288ad4"><p class="cl-ea28792a"><span class="cl-ea1a21f4"></span></p></td><td class="cl-ea288adc"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(-25.021)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(-24.540)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(-23.306)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288ade"><p class="cl-ea28792a"><span class="cl-ea1a21f4">bathrooms</span></p></td><td class="cl-ea288ae6"><p class="cl-ea28792a"><span class="cl-ea1a21f4">6795.037+</span></p></td><td class="cl-ea288af0"><p class="cl-ea28792a"><span class="cl-ea1a21f4">19338.314***</span></p></td><td class="cl-ea288af0"><p class="cl-ea28792a"><span class="cl-ea1a21f4">20288.528***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288ad4"><p class="cl-ea28792a"><span class="cl-ea1a21f4"></span></p></td><td class="cl-ea288adc"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(1.762)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(5.961)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(6.316)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288af1"><p class="cl-ea28792a"><span class="cl-ea1a21f4">sqft_living</span></p></td><td class="cl-ea288af2"><p class="cl-ea28792a"><span class="cl-ea1a21f4">315.571***</span></p></td><td class="cl-ea288afa"><p class="cl-ea28792a"><span class="cl-ea1a21f4">294.543***</span></p></td><td class="cl-ea288afa"><p class="cl-ea28792a"><span class="cl-ea1a21f4">288.133***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288ad4"><p class="cl-ea28792a"><span class="cl-ea1a21f4"></span></p></td><td class="cl-ea288adc"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(99.650)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(108.515)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(108.069)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288afb"><p class="cl-ea28792a"><span class="cl-ea1a21f4">sqft_lot</span></p></td><td class="cl-ea288afc"><p class="cl-ea28792a"><span class="cl-ea1a21f4">-0.399***</span></p></td><td class="cl-ea288b04"><p class="cl-ea28792a"><span class="cl-ea1a21f4">0.428***</span></p></td><td class="cl-ea288b04"><p class="cl-ea28792a"><span class="cl-ea1a21f4">0.223***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288ad4"><p class="cl-ea28792a"><span class="cl-ea1a21f4"></span></p></td><td class="cl-ea288adc"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(-8.770)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(10.824)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(5.704)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288b05"><p class="cl-ea28792a"><span class="cl-ea1a21f4">floors</span></p></td><td class="cl-ea288b06"><p class="cl-ea28792a"><span class="cl-ea1a21f4">-3785.107</span></p></td><td class="cl-ea288b0e"><p class="cl-ea28792a"><span class="cl-ea1a21f4">-22766.366***</span></p></td><td class="cl-ea288b0e"><p class="cl-ea28792a"><span class="cl-ea1a21f4">-18888.026***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288ad4"><p class="cl-ea28792a"><span class="cl-ea1a21f4"></span></p></td><td class="cl-ea288adc"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(-0.992)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(-7.042)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(-5.948)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288b18"><p class="cl-ea28792a"><span class="cl-ea1a21f4">year_month2014-06</span></p></td><td class="cl-ea288b22"><p class="cl-ea28792a"><span class="cl-ea1a21f4">6015.759</span></p></td><td class="cl-ea288b23"><p class="cl-ea28792a"><span class="cl-ea1a21f4">10562.394</span></p></td><td class="cl-ea288b23"><p class="cl-ea28792a"><span class="cl-ea1a21f4">11027.366</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288ad4"><p class="cl-ea28792a"><span class="cl-ea1a21f4"></span></p></td><td class="cl-ea288adc"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(0.719)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(1.505)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(1.587)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288b18"><p class="cl-ea28792a"><span class="cl-ea1a21f4">year_month2014-07</span></p></td><td class="cl-ea288b22"><p class="cl-ea28792a"><span class="cl-ea1a21f4">-7287.796</span></p></td><td class="cl-ea288b23"><p class="cl-ea28792a"><span class="cl-ea1a21f4">2932.383</span></p></td><td class="cl-ea288b23"><p class="cl-ea28792a"><span class="cl-ea1a21f4">3230.760</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288ad4"><p class="cl-ea28792a"><span class="cl-ea1a21f4"></span></p></td><td class="cl-ea288adc"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(-0.875)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(0.420)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(0.467)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288b18"><p class="cl-ea28792a"><span class="cl-ea1a21f4">year_month2014-08</span></p></td><td class="cl-ea288b22"><p class="cl-ea28792a"><span class="cl-ea1a21f4">-2472.900</span></p></td><td class="cl-ea288b23"><p class="cl-ea28792a"><span class="cl-ea1a21f4">8832.195</span></p></td><td class="cl-ea288b23"><p class="cl-ea28792a"><span class="cl-ea1a21f4">7152.294</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288ad4"><p class="cl-ea28792a"><span class="cl-ea1a21f4"></span></p></td><td class="cl-ea288adc"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(-0.288)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(1.226)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(1.002)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288b18"><p class="cl-ea28792a"><span class="cl-ea1a21f4">year_month2014-09</span></p></td><td class="cl-ea288b22"><p class="cl-ea28792a"><span class="cl-ea1a21f4">-7838.399</span></p></td><td class="cl-ea288b23"><p class="cl-ea28792a"><span class="cl-ea1a21f4">2520.796</span></p></td><td class="cl-ea288b23"><p class="cl-ea28792a"><span class="cl-ea1a21f4">1669.215</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288ad4"><p class="cl-ea28792a"><span class="cl-ea1a21f4"></span></p></td><td class="cl-ea288adc"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(-0.892)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(0.342)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(0.229)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288b18"><p class="cl-ea28792a"><span class="cl-ea1a21f4">year_month2014-10</span></p></td><td class="cl-ea288b22"><p class="cl-ea28792a"><span class="cl-ea1a21f4">643.829</span></p></td><td class="cl-ea288b23"><p class="cl-ea28792a"><span class="cl-ea1a21f4">7249.104</span></p></td><td class="cl-ea288b23"><p class="cl-ea28792a"><span class="cl-ea1a21f4">9102.974</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288ad4"><p class="cl-ea28792a"><span class="cl-ea1a21f4"></span></p></td><td class="cl-ea288adc"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(0.074)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(0.998)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(1.265)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288b18"><p class="cl-ea28792a"><span class="cl-ea1a21f4">year_month2014-11</span></p></td><td class="cl-ea288b22"><p class="cl-ea28792a"><span class="cl-ea1a21f4">-7658.061</span></p></td><td class="cl-ea288b23"><p class="cl-ea28792a"><span class="cl-ea1a21f4">-2033.165</span></p></td><td class="cl-ea288b23"><p class="cl-ea28792a"><span class="cl-ea1a21f4">-178.541</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288ad4"><p class="cl-ea28792a"><span class="cl-ea1a21f4"></span></p></td><td class="cl-ea288adc"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(-0.822)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(-0.260)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(-0.023)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288b18"><p class="cl-ea28792a"><span class="cl-ea1a21f4">year_month2014-12</span></p></td><td class="cl-ea288b22"><p class="cl-ea28792a"><span class="cl-ea1a21f4">-16854.808+</span></p></td><td class="cl-ea288b23"><p class="cl-ea28792a"><span class="cl-ea1a21f4">-1382.891</span></p></td><td class="cl-ea288b23"><p class="cl-ea28792a"><span class="cl-ea1a21f4">-127.009</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288ad4"><p class="cl-ea28792a"><span class="cl-ea1a21f4"></span></p></td><td class="cl-ea288adc"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(-1.833)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(-0.179)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(-0.017)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288b18"><p class="cl-ea28792a"><span class="cl-ea1a21f4">year_month2015-01</span></p></td><td class="cl-ea288b22"><p class="cl-ea28792a"><span class="cl-ea1a21f4">-12714.538</span></p></td><td class="cl-ea288b23"><p class="cl-ea28792a"><span class="cl-ea1a21f4">3829.449</span></p></td><td class="cl-ea288b23"><p class="cl-ea28792a"><span class="cl-ea1a21f4">8256.888</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288ad4"><p class="cl-ea28792a"><span class="cl-ea1a21f4"></span></p></td><td class="cl-ea288adc"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(-1.222)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(0.439)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(0.955)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288b18"><p class="cl-ea28792a"><span class="cl-ea1a21f4">year_month2015-02</span></p></td><td class="cl-ea288b22"><p class="cl-ea28792a"><span class="cl-ea1a21f4">-12149.568</span></p></td><td class="cl-ea288b23"><p class="cl-ea28792a"><span class="cl-ea1a21f4">10768.049</span></p></td><td class="cl-ea288b23"><p class="cl-ea28792a"><span class="cl-ea1a21f4">15466.226+</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288ad4"><p class="cl-ea28792a"><span class="cl-ea1a21f4"></span></p></td><td class="cl-ea288adc"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(-1.262)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(1.333)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(1.933)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288b18"><p class="cl-ea28792a"><span class="cl-ea1a21f4">year_month2015-03</span></p></td><td class="cl-ea288b22"><p class="cl-ea28792a"><span class="cl-ea1a21f4">24034.109**</span></p></td><td class="cl-ea288b23"><p class="cl-ea28792a"><span class="cl-ea1a21f4">38092.481***</span></p></td><td class="cl-ea288b23"><p class="cl-ea28792a"><span class="cl-ea1a21f4">40551.732***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288ad4"><p class="cl-ea28792a"><span class="cl-ea1a21f4"></span></p></td><td class="cl-ea288adc"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(2.783)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(5.258)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(5.650)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288b18"><p class="cl-ea28792a"><span class="cl-ea1a21f4">year_month2015-04</span></p></td><td class="cl-ea288b22"><p class="cl-ea28792a"><span class="cl-ea1a21f4">29222.396***</span></p></td><td class="cl-ea288b23"><p class="cl-ea28792a"><span class="cl-ea1a21f4">37461.977***</span></p></td><td class="cl-ea288b23"><p class="cl-ea28792a"><span class="cl-ea1a21f4">39250.975***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288ad4"><p class="cl-ea28792a"><span class="cl-ea1a21f4"></span></p></td><td class="cl-ea288adc"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(3.522)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(5.381)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(5.692)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288b18"><p class="cl-ea28792a"><span class="cl-ea1a21f4">year_month2015-05</span></p></td><td class="cl-ea288b22"><p class="cl-ea28792a"><span class="cl-ea1a21f4">34683.499**</span></p></td><td class="cl-ea288b23"><p class="cl-ea28792a"><span class="cl-ea1a21f4">48236.175***</span></p></td><td class="cl-ea288b23"><p class="cl-ea28792a"><span class="cl-ea1a21f4">51566.411***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288ad4"><p class="cl-ea28792a"><span class="cl-ea1a21f4"></span></p></td><td class="cl-ea288adc"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(2.894)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(4.797)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(5.177)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288b2c"><p class="cl-ea28792a"><span class="cl-ea1a21f4">dist_cbd[, 1]</span></p></td><td class="cl-ea288b36"><p class="cl-ea28792a"><span class="cl-ea1a21f4"></span></p></td><td class="cl-ea288b37"><p class="cl-ea28792a"><span class="cl-ea1a21f4">-9749.342***</span></p></td><td class="cl-ea288b37"><p class="cl-ea28792a"><span class="cl-ea1a21f4">-12277.122***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288ad4"><p class="cl-ea28792a"><span class="cl-ea1a21f4"></span></p></td><td class="cl-ea288adc"><p class="cl-ea28792a"><span class="cl-ea1a21f4"></span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(-44.666)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(-84.535)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288b38"><p class="cl-ea28792a"><span class="cl-ea1a21f4">transporta</span></p></td><td class="cl-ea288b40"><p class="cl-ea28792a"><span class="cl-ea1a21f4"></span></p></td><td class="cl-ea288b41"><p class="cl-ea28792a"><span class="cl-ea1a21f4">-23895.013***</span></p></td><td class="cl-ea288b41"><p class="cl-ea28792a"><span class="cl-ea1a21f4"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288ad4"><p class="cl-ea28792a"><span class="cl-ea1a21f4"></span></p></td><td class="cl-ea288adc"><p class="cl-ea28792a"><span class="cl-ea1a21f4"></span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(-17.986)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288b42"><p class="cl-ea28792a"><span class="cl-ea1a21f4">poverty_pe</span></p></td><td class="cl-ea288b4a"><p class="cl-ea28792a"><span class="cl-ea1a21f4"></span></p></td><td class="cl-ea288b4b"><p class="cl-ea28792a"><span class="cl-ea1a21f4">-7491.906***</span></p></td><td class="cl-ea288b4b"><p class="cl-ea28792a"><span class="cl-ea1a21f4"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288ad4"><p class="cl-ea28792a"><span class="cl-ea1a21f4"></span></p></td><td class="cl-ea288adc"><p class="cl-ea28792a"><span class="cl-ea1a21f4"></span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(-40.361)</span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288b54"><p class="cl-ea28792a"><span class="cl-ea1a21f4">EHD_percen</span></p></td><td class="cl-ea288b5e"><p class="cl-ea28792a"><span class="cl-ea1a21f4"></span></p></td><td class="cl-ea288b5f"><p class="cl-ea28792a"><span class="cl-ea1a21f4"></span></p></td><td class="cl-ea288b5f"><p class="cl-ea28792a"><span class="cl-ea1a21f4">-2575.047***</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288ad4"><p class="cl-ea28792a"><span class="cl-ea1a21f4"></span></p></td><td class="cl-ea288adc"><p class="cl-ea28792a"><span class="cl-ea1a21f4"></span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4"></span></p></td><td class="cl-ea288add"><p class="cl-ea28792a"><span class="cl-ea1a21f4">(-46.591)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288b60"><p class="cl-ea28792a"><span class="cl-ea1a21f4">Num.Obs.</span></p></td><td class="cl-ea288b68"><p class="cl-ea28792a"><span class="cl-ea1a21f4">21200</span></p></td><td class="cl-ea288b72"><p class="cl-ea28792a"><span class="cl-ea1a21f4">21200</span></p></td><td class="cl-ea288b72"><p class="cl-ea28792a"><span class="cl-ea1a21f4">21200</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288b73"><p class="cl-ea28792a"><span class="cl-ea1a21f4">R2</span></p></td><td class="cl-ea288b7c"><p class="cl-ea28792a"><span class="cl-ea1a21f4">0.510</span></p></td><td class="cl-ea288b7d"><p class="cl-ea28792a"><span class="cl-ea1a21f4">0.655</span></p></td><td class="cl-ea288b7d"><p class="cl-ea28792a"><span class="cl-ea1a21f4">0.662</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288b7e"><p class="cl-ea28792a"><span class="cl-ea1a21f4">R2 Adj.</span></p></td><td class="cl-ea288b86"><p class="cl-ea28792a"><span class="cl-ea1a21f4">0.510</span></p></td><td class="cl-ea288b87"><p class="cl-ea28792a"><span class="cl-ea1a21f4">0.655</span></p></td><td class="cl-ea288b87"><p class="cl-ea28792a"><span class="cl-ea1a21f4">0.661</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288b90"><p class="cl-ea28792a"><span class="cl-ea1a21f4">AIC</span></p></td><td class="cl-ea288b91"><p class="cl-ea28792a"><span class="cl-ea1a21f4">588488.8</span></p></td><td class="cl-ea288b92"><p class="cl-ea28792a"><span class="cl-ea1a21f4">581042.0</span></p></td><td class="cl-ea288b92"><p class="cl-ea28792a"><span class="cl-ea1a21f4">580636.9</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288b90"><p class="cl-ea28792a"><span class="cl-ea1a21f4">BIC</span></p></td><td class="cl-ea288b91"><p class="cl-ea28792a"><span class="cl-ea1a21f4">588640.0</span></p></td><td class="cl-ea288b92"><p class="cl-ea28792a"><span class="cl-ea1a21f4">581217.1</span></p></td><td class="cl-ea288b92"><p class="cl-ea28792a"><span class="cl-ea1a21f4">580804.1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288b9a"><p class="cl-ea28792a"><span class="cl-ea1a21f4">Log.Lik.</span></p></td><td class="cl-ea288ba4"><p class="cl-ea28792a"><span class="cl-ea1a21f4">-294225.378</span></p></td><td class="cl-ea288ba5"><p class="cl-ea28792a"><span class="cl-ea1a21f4">-290498.985</span></p></td><td class="cl-ea288ba5"><p class="cl-ea28792a"><span class="cl-ea1a21f4">-290297.438</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288bae"><p class="cl-ea28792a"><span class="cl-ea1a21f4">F</span></p></td><td class="cl-ea288baf"><p class="cl-ea28792a"><span class="cl-ea1a21f4">1297.057</span></p></td><td class="cl-ea288bb8"><p class="cl-ea28792a"><span class="cl-ea1a21f4">2012.817</span></p></td><td class="cl-ea288bb8"><p class="cl-ea28792a"><span class="cl-ea1a21f4">2180.926</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ea288bb9"><p class="cl-ea28792a"><span class="cl-ea1a21f4">RMSE</span></p></td><td class="cl-ea288bc2"><p class="cl-ea28792a"><span class="cl-ea1a21f4">257716.91</span></p></td><td class="cl-ea288bc3"><p class="cl-ea28792a"><span class="cl-ea1a21f4">216175.05</span></p></td><td class="cl-ea288bc3"><p class="cl-ea28792a"><span class="cl-ea1a21f4">214129.63</span></p></td></tr></tbody><tfoot><tr style="overflow-wrap:break-word;"><td colspan="4" class="cl-ea288bcc"><p class="cl-ea287920"><span class="cl-ea1a21f4">+ p &lt; 0.1, * p &lt; 0.05, ** p &lt; 0.01, *** p &lt; 0.001</span></p></td></tr><tr style="overflow-wrap:break-word;"><td colspan="4" class="cl-ea288bd6"><p class="cl-ea287920"><span class="cl-ea1a21f4">Tallene i parentes er t-verdier.</span></p></td></tr></tfoot></table></div>
</div>
</div>
</figure>
</div>
</div>
<p>En regresjonstabell for de tre hedoniske modellene er gitt i <a href="#tbl-1" class="quarto-xref">Tabell&nbsp;1</a> . I modell 1, som kun inkluderer huskarakteristika og tidsdummier, er antall soverom negativt assosiert med boligprisene (-59,606.36), boliger med flere soverom har lavere priser. Antall bad har en positiv effekt (6,795.04), og større boareal øker prisen (315.57). Tomtestørrelse har en negativ effekt på -0.399, mens antall etasjer ikke har en signifikant innvirkning på prisene. T-verdiene for huskarakteristikaene er alle høye, noe som indikerer at disse er signifikante, mens antall etasjer ikke er signifikant (t-verdi er lav). Når det gjelder tidsdummier, viser resultatene at prisene varierer betydelig fra måned til måned, med noen måneder som har positive effekter på prisen, mens andre har en negativ effekt. Mai 2014 er referansemåneden, noe som betyr at alle de andre dummykoeffisientene i modellen viser prisforskjellen sammenlignet med mai 2014. Det er få av tidsdummiene som er signifikante, noe som gjelder for alle modellene.</p>
<p>Modell 2 som inkluderer distanse til CBD, transport og fattigdom, viser at boliger lengre unna sentrum har lavere priser (-9,749.34), mens dårligere transport og høyere fattigdom reduserer boligprisene (-23,895.01 og -7,491.91). T-verdiene for disse variablene er høye, noe som betyr at de har en signifikant innvirkning på boligprisene. Resultatene viser også at flere soverom (-49,195.38) reduserer prisen, mens flere bad (19,338.31) og større boareal (294.54) øker prisen. Større tomt (0.43) har også en positiv effekt, men med mindre innvirkning enn boareal. Flere etasjer (-22,766.37) ser ut til å redusere prisen. Alle koeffisientene for huskrakteristika har høy T-verdi. Tidsdummiene for 2015 viser igjen variasjon i boligprisene.</p>
<p>Modell 3 som inkluderer EHD-indeksen, viser at dårligere miljøforhold er assosiert med lavere boligpriser (-2,575.05). T-verdien for miljøindeksen er relativt høy, som indikerer at den er signifikant. De andre koeffisientene for huskarakteristika, som soverom, bad, boareal, og tomtestørrelse, er stort sett konsistente med de tidligere modellene, og har signifikante t-verdier.. Tidsdummiene i modell 3 viser også variasjon i boligprisene gjennom året, med noen måneder som har en positiv effekt på prisene, mens andre måneder har en negativ effekt på prisene.</p>
</section>
</section>
<section id="sammenligning-av-de-tre-modellene---hvilken-er-best" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Sammenligning av de tre modellene - Hvilken er best?</h1>
<section id="r²-og-justert-r²" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="r²-og-justert-r²"><span class="header-section-number">7.1</span> R² og justert R²</h2>
<p>Modell 1 har den laveste R² og justert R², noe som tyder på at den forklarer minst av variasjonen i dataene. Modell 2 har en betydelig høyere R²og justert R² enn modell 1, noe som indikerer en bedre forklaringsevne. Modell 3 har den høyeste R² og justert R², som tyder på at den gir den beste forklaringen av boligprisene blant de tre modellene. Basert på R² og justert R² ser Modell 3 ut til å være den mest pålitelige av de tre, da den forklarer mest av variasjonen i boligprisene.</p>
</section>
<section id="aic-og-bic" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="aic-og-bic"><span class="header-section-number">7.2</span> AIC og BIC</h2>
<p>Model 1 har en AIC-verdi på 588488.8, mens model 2 har en AIC-verdi på 581042.0. Model 3 har den laveste AIC-verdien på 580636.9. Lavere AIC-verdi betyr at model 3 er å foretrekke over model 1 og model 2, siden den gir en bedre balanse mellom tilpasning og kompleksitet.</p>
<p>Model1 har en BIC-verdi på 588640.0, model 2 har en BIC-verdi på 581217.1, og model 3 har den laveste BIC-verdien på 580804.1.BIC-verdi følger samme prinsipp som AIC: lavere verdier er bedre. Også her har model 3 den laveste verdien, noe som indikerer at model 3 er den beste modellen av de tre når man også tar hensyn til modellens kompleksitet.</p>
</section>
<section id="log-likelihood" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="log-likelihood"><span class="header-section-number">7.3</span> Log-likelihood</h2>
<p>Log-likelihood er en måling av modellens sannsynlighet; høyere log-likelihood er bedre. Modell 3 har høyest log-likelihood med en verdi på -290297.438, som betyr at den gir best tilpasning til dataene sammenlignet med de andre modellene.</p>
</section>
<section id="f-verdi" class="level2" data-number="7.4">
<h2 data-number="7.4" class="anchored" data-anchor-id="f-verdi"><span class="header-section-number">7.4</span> F-verdi</h2>
<p>F-verdien indikerer hvor godt modellen samlet sett forklarer variasjonen i boligprisene. Fra tabellen ser vi at F-verdien øker fra modell 1 (1297.057) til modell 3 (2180.926), noe som tyder på at den siste modellen har er best. Denne økningen i F-verdien fra modell 1 til modell 3 indikerer at når vi inkluderer flere variabler forbedres modellens forklaringskraft betraktelig.</p>
</section>
<section id="rmse" class="level2" data-number="7.5">
<h2 data-number="7.5" class="anchored" data-anchor-id="rmse"><span class="header-section-number">7.5</span> RMSE</h2>
<p>RMSE (Root Mean Squared Error) viser gjennomsnittlig avvik mellom de faktiske og de predikerte boligprisene. Den faller fra modell 1 (257716.91) til modell 3 (214129.63), noe som betyr at Modell 3 gir de mest presise prediksjonene og har lavest feilmargin.</p>
</section>
<section id="konklusjon" class="level2" data-number="7.6">
<h2 data-number="7.6" class="anchored" data-anchor-id="konklusjon"><span class="header-section-number">7.6</span> Konklusjon</h2>
<p>Modell 3 ser ut til å være den mest pålitelige og presise modellen. Modell 3 har den høyeste R² og justert R², noe som indikerer at den forklarer mest av variasjonen i prisene. I tillegg har modell 3 de laveste AIC- og BIC-verdiene, som viser at modellen gir en god balanse mellom kompleksitet og tilpasning. Med høyest log-likelihood og en betydelig forbedret F-verdi, er modell 3 også bedre tilpasset dataene enn de andre modellene. Modell 3 har også den laveste RMSE-verdien, noe som tyder på at den gir de mest presise prediksjonene med minst avvik fra de faktiske boligprisene.</p>
</section>
</section>
<section id="residualanalyse" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Residualanalyse</h1>
<p>Videre utføres en residual- og diagostikkanalyse for å vurdere modellens egenskaper ytterligere. Vi skal se nærmere på de fire plottene; “Residuals vs Fitted”, “Q-Q Residuals”, “Scale-Location” og “Residuals vs Leverage” for de tre hedoniske modellene. <a href="#fig-3" class="quarto-xref">Figur&nbsp;3</a> presenterer de fire plottene for modell 1, mens <a href="#fig-4" class="quarto-xref">Figur&nbsp;4</a> viser de samme plottene for modell 2, og til slutt gir <a href="#fig-5" class="quarto-xref">Figur&nbsp;5</a> en presentasjon av de fire plottene for modell 3.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot 1 (Model 1)</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>))  <span class="co"># For å vise alle fire plott i én visning</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(model1) </span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-3" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="arbeidskrav_files/figure-html/fig-3-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figur&nbsp;3: Residual- og diagnostikkplott for Modell 1
</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot 2 (Modell 2)</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>))  <span class="co"># For å vise alle fire plott i én visning</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(model2) </span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-4" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="arbeidskrav_files/figure-html/fig-4-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figur&nbsp;4: Residual- og diagnostikkplott for Modell 2
</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot 3 (Modell 3)</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>))  <span class="co"># For å vise alle fire plott i én visning</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(model3) </span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-5" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-5-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="arbeidskrav_files/figure-html/fig-5-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-5-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figur&nbsp;5: Residual- og diagnostikkplott for Modell 3
</figcaption>
</figure>
</div>
</div>
</div>
<section id="residuals-vs-fitted" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="residuals-vs-fitted"><span class="header-section-number">8.1</span> Residuals vs Fitted</h2>
<p>Dette plottet viser forholdet mellom residualene og de tilpassede verdiene. Et godt tilpasset lineært forhold skal vise en tilfeldig fordeling av punktene rundt null-linjen, uten tydelige mønstre. I alle modellene ser vi litt avvik fra en helt jevn fordeling. For noen av modellene, spesielt modell 1, kan vi se noen mønstre som tyder på at modellen ikke helt fanger opp alle aspekter av dataene. Modell 3 ser ut til å ha en jevnere fordeling enn de andre modellene, noe som indikerer at denne modellen kan ha en bedre tilpasning. Samtidig ser vi tegn på heteroskedastisitet i form av en svak spredning i residualene for alle modellene. Dette antyder at variansen i feilene ikke er konstant, noe som kan påvirke modellenes presisjon og innebærer at estimatene ikke er like pålitelige over hele verdiskalaen.</p>
</section>
<section id="q-q-residuals" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="q-q-residuals"><span class="header-section-number">8.2</span> Q-Q Residuals</h2>
<p>Q-Q-plottet viser om residualene er normalfordelte ved å plotte de standardiserte residualene mot de teoretiske kvantilene for en normalfordeling. I alle modellene ser vi at noen punkter, spesielt i ytterkantene, avviker betydelig fra den teoretiske linjen. Dette indikerer at det er enkelte avvik eller “outliers” som ikke følger normalfordelingen. Modell 3 ser ut til å ha litt færre avvik enn de andre modellene, men det er fortsatt tegn på at noen residualer ikke er helt normalfordelte.</p>
</section>
<section id="scale-location" class="level2" data-number="8.3">
<h2 data-number="8.3" class="anchored" data-anchor-id="scale-location"><span class="header-section-number">8.3</span> Scale-Location</h2>
<p>Dette plottet viser kvadratroten av de standardiserte residualene mot de tilpassede verdiene. En jevn fordeling av punktene langs null-linjen indikerer homoskedastisitet . I alle modellene ser vi en svak trend der variansen øker med de tilpassede verdiene, noe som indikerer at det kan være heteroskedastisitet. Modell 3 ser igjen litt bedre ut enn modell 1 og modell 2, men heteroskedastisitet kan fortsatt være et problem noe som potensielt kan redusere modellenes robusthet og nøyaktighet i prediksjonene.</p>
</section>
<section id="residuals-vs-leverage" class="level2" data-number="8.4">
<h2 data-number="8.4" class="anchored" data-anchor-id="residuals-vs-leverage"><span class="header-section-number">8.4</span> Residuals vs Leverage</h2>
<p>Dette plottet viser hvilke observasjoner som har stor innflytelse på modellen og hvor store residualene er for disse observasjonene. Punkter som ligger langt fra de fleste dataene, og spesielt de som har høy leverage, kan være “influential points” som påvirker modellen betydelig. I alle modellene ser vi noen observasjoner med høy leverage, spesielt i ytterkantene. Cook’s distance-linjene hjelper oss å identifisere punkter med stor påvirkning. For eksempel ser vi noen observasjoner som kan påvirke modellens resultater betydelig. Modell 3 ser ut til å ha færre punkter med høy leverage enn de andre modellene, noe som kan indikere en bedre robusthet mot ekstreme observasjoner.</p>
</section>
<section id="konklusjon-1" class="level2" data-number="8.5">
<h2 data-number="8.5" class="anchored" data-anchor-id="konklusjon-1"><span class="header-section-number">8.5</span> Konklusjon</h2>
<p>Samlet sett gir modell 3 den beste tilpasningen blant de tre, men det er fortsatt noen utfordringer. Den har en jevnere fordeling i <em>Residuals vs Fitted</em>-plottet og færre punkter med høy leverage sammenlignet med de andre modellene, noe som indikerer bedre tilpasning. Men heteroskedastisitet og manglende normalitet i residualene utfordrer fortsatt modellens nøyaktighet og pålitelighet, noe som tyder på at det kan være rom for videre forbedring.</p>
</section>
</section>
<section id="simultan-test-på-tids-dummiene" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> Simultan test på tids-dummiene</h1>
<p>Videre skal vi bruke en simultan test på tids-dummiene i hver av de hedoniske modellene for å avgjøre om vi trenger de.</p>
<section id="model-1" class="level2" data-number="9.1">
<h2 data-number="9.1" class="anchored" data-anchor-id="model-1"><span class="header-section-number">9.1</span> Model 1</h2>
<p><a href="#tbl-2" class="quarto-xref">Tabell&nbsp;2</a> viser resultatene fra en simultantest på tids-dummiene i modell 1.</p>
<p><strong>F-verdi</strong>: 5.717</p>
<p><strong>p-verdi</strong>: 6.082e-10 (som er ekstremt lav, mindre enn 0.001)</p>
<p>For Model 1 indikerer den lave p-verdien (p &lt; 0.001) at vi kan avvise nullhypotesen om at alle tids-dummiene samlet er lik null. Dette betyr at tids-dummiene har en signifikant effekt på modellens forklaringskraft, og de bør inkluderes i modellen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>test_mod1 <span class="ot">&lt;-</span> <span class="fu">linearHypothesis</span>(model1, <span class="fu">matchCoefs</span>(model1, <span class="st">"year_month"</span>), <span class="at">white.adjust =</span> <span class="st">"hc3"</span>)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>test_mod1_table <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(test_mod1)</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>table_data1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">Model =</span> <span class="fu">c</span>(<span class="st">"Restricted Model"</span>, <span class="st">"Model 1"</span>),</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">Res.Df</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">21194</span>, <span class="dv">21182</span>),  </span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">Df =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">12</span>),  </span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">F =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="fl">5.717</span>), </span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">Pr(&gt;F)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="fl">6.082e-10</span>),  </span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">Significance =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="st">"***"</span>)</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>table_data1 <span class="sc">%&gt;%</span></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">flextable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_header_labels</span>(</span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">Model =</span> <span class="st">"Model Description"</span>,</span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Res.Df</span><span class="st">`</span> <span class="ot">=</span> <span class="st">"Res. Df"</span>,</span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">Df =</span> <span class="st">"Df"</span>,</span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">F =</span> <span class="st">"F-Statistic"</span>,</span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Pr(&gt;F)</span><span class="st">`</span> <span class="ot">=</span> <span class="st">"P-Value"</span>,</span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">Significance =</span> <span class="st">"Significance"</span></span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colformat_double</span>(<span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="tbl-2" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabell&nbsp;2: Simultan test på tids-dummiene for Modell 1
</figcaption>
<div aria-describedby="tbl-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-ecb58b38{}.cl-ecb2e752{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-ecb3f49e{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-ecb3f49f{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-ecb400a6{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ecb400a7{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ecb400b0{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ecb400b1{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ecb400b2{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ecb400ba{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-ecb58b38"><thead><tr style="overflow-wrap:break-word;"><th class="cl-ecb400a6"><p class="cl-ecb3f49e"><span class="cl-ecb2e752">Model Description</span></p></th><th class="cl-ecb400a7"><p class="cl-ecb3f49f"><span class="cl-ecb2e752">Res. Df</span></p></th><th class="cl-ecb400a7"><p class="cl-ecb3f49f"><span class="cl-ecb2e752">Df</span></p></th><th class="cl-ecb400a7"><p class="cl-ecb3f49f"><span class="cl-ecb2e752">F-Statistic</span></p></th><th class="cl-ecb400a7"><p class="cl-ecb3f49f"><span class="cl-ecb2e752">Pr..F.</span></p></th><th class="cl-ecb400a6"><p class="cl-ecb3f49e"><span class="cl-ecb2e752">Significance</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-ecb400b0"><p class="cl-ecb3f49e"><span class="cl-ecb2e752">Restricted Model</span></p></td><td class="cl-ecb400b1"><p class="cl-ecb3f49f"><span class="cl-ecb2e752">21,194.000</span></p></td><td class="cl-ecb400b1"><p class="cl-ecb3f49f"><span class="cl-ecb2e752"></span></p></td><td class="cl-ecb400b1"><p class="cl-ecb3f49f"><span class="cl-ecb2e752"></span></p></td><td class="cl-ecb400b1"><p class="cl-ecb3f49f"><span class="cl-ecb2e752"></span></p></td><td class="cl-ecb400b0"><p class="cl-ecb3f49e"><span class="cl-ecb2e752"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ecb400b2"><p class="cl-ecb3f49e"><span class="cl-ecb2e752">Model 1</span></p></td><td class="cl-ecb400ba"><p class="cl-ecb3f49f"><span class="cl-ecb2e752">21,182.000</span></p></td><td class="cl-ecb400ba"><p class="cl-ecb3f49f"><span class="cl-ecb2e752">12.000</span></p></td><td class="cl-ecb400ba"><p class="cl-ecb3f49f"><span class="cl-ecb2e752">5.717</span></p></td><td class="cl-ecb400ba"><p class="cl-ecb3f49f"><span class="cl-ecb2e752">0.000</span></p></td><td class="cl-ecb400b2"><p class="cl-ecb3f49e"><span class="cl-ecb2e752">***</span></p></td></tr></tbody></table></div>
</div>
</div>
</figure>
</div>
</div>
</section>
<section id="modell-2" class="level2" data-number="9.2">
<h2 data-number="9.2" class="anchored" data-anchor-id="modell-2"><span class="header-section-number">9.2</span> Modell 2</h2>
<p><a href="#tbl-3" class="quarto-xref">Tabell&nbsp;3</a> viser resultatene fra en simultantest på tids-dummiene i modell 2.</p>
<p><strong>F-verdi</strong>: 8.2016</p>
<p><strong>p-verdi</strong>: 1.245e-15 (også ekstremt lav)</p>
<p>I Model 2 er p-verdien også svært lav, noe som igjen betyr at vi kan avvise nullhypotesen. Tids-dummiene har en signifikant effekt på boligprisene i denne modellen og bør beholdes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>test_mod2 <span class="ot">&lt;-</span> <span class="fu">linearHypothesis</span>(model2, <span class="fu">matchCoefs</span>(model2, <span class="st">"year_month"</span>), <span class="at">white.adjust =</span> <span class="st">"hc3"</span>)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>test_mod2_table <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(test_mod2)</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>table_data2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">Model =</span> <span class="fu">c</span>(<span class="st">"Restricted Model"</span>, <span class="st">"Model 2"</span>),</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">Res.Df</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">21191</span>, <span class="dv">21179</span>),  </span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">Df =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">12</span>),  </span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">F =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="fl">8.2016</span>), </span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">Pr(&gt;F)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="fl">1.245e-15</span>),  </span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">Significance =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="st">"***"</span>)</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>table_data2 <span class="sc">%&gt;%</span></span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">flextable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_header_labels</span>(</span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">Model =</span> <span class="st">"Model Description"</span>,</span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Res.Df</span><span class="st">`</span> <span class="ot">=</span> <span class="st">"Res. Df"</span>,</span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">Df =</span> <span class="st">"Df"</span>,</span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">F =</span> <span class="st">"F-Statistic"</span>,</span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Pr(&gt;F)</span><span class="st">`</span> <span class="ot">=</span> <span class="st">"P-Value"</span>,</span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">Significance =</span> <span class="st">"Significance"</span></span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colformat_double</span>(<span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="tbl-3" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabell&nbsp;3: Simultan test på tids-dummiene for Modell 2
</figcaption>
<div aria-describedby="tbl-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-eccee2b8{}.cl-eccc21d6{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-eccd2d6a{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-eccd2d74{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-eccd38d2{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-eccd38d3{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-eccd38d4{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-eccd38dc{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-eccd38dd{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-eccd38e6{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-eccee2b8"><thead><tr style="overflow-wrap:break-word;"><th class="cl-eccd38d2"><p class="cl-eccd2d6a"><span class="cl-eccc21d6">Model Description</span></p></th><th class="cl-eccd38d3"><p class="cl-eccd2d74"><span class="cl-eccc21d6">Res. Df</span></p></th><th class="cl-eccd38d3"><p class="cl-eccd2d74"><span class="cl-eccc21d6">Df</span></p></th><th class="cl-eccd38d3"><p class="cl-eccd2d74"><span class="cl-eccc21d6">F-Statistic</span></p></th><th class="cl-eccd38d3"><p class="cl-eccd2d74"><span class="cl-eccc21d6">Pr..F.</span></p></th><th class="cl-eccd38d2"><p class="cl-eccd2d6a"><span class="cl-eccc21d6">Significance</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-eccd38d4"><p class="cl-eccd2d6a"><span class="cl-eccc21d6">Restricted Model</span></p></td><td class="cl-eccd38dc"><p class="cl-eccd2d74"><span class="cl-eccc21d6">21,191.000</span></p></td><td class="cl-eccd38dc"><p class="cl-eccd2d74"><span class="cl-eccc21d6"></span></p></td><td class="cl-eccd38dc"><p class="cl-eccd2d74"><span class="cl-eccc21d6"></span></p></td><td class="cl-eccd38dc"><p class="cl-eccd2d74"><span class="cl-eccc21d6"></span></p></td><td class="cl-eccd38d4"><p class="cl-eccd2d6a"><span class="cl-eccc21d6"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-eccd38dd"><p class="cl-eccd2d6a"><span class="cl-eccc21d6">Model 2</span></p></td><td class="cl-eccd38e6"><p class="cl-eccd2d74"><span class="cl-eccc21d6">21,179.000</span></p></td><td class="cl-eccd38e6"><p class="cl-eccd2d74"><span class="cl-eccc21d6">12.000</span></p></td><td class="cl-eccd38e6"><p class="cl-eccd2d74"><span class="cl-eccc21d6">8.202</span></p></td><td class="cl-eccd38e6"><p class="cl-eccd2d74"><span class="cl-eccc21d6">0.000</span></p></td><td class="cl-eccd38dd"><p class="cl-eccd2d6a"><span class="cl-eccc21d6">***</span></p></td></tr></tbody></table></div>
</div>
</div>
</figure>
</div>
</div>
</section>
<section id="modell-3" class="level2" data-number="9.3">
<h2 data-number="9.3" class="anchored" data-anchor-id="modell-3"><span class="header-section-number">9.3</span> Modell 3</h2>
<p><a href="#tbl-4" class="quarto-xref">Tabell&nbsp;4</a> viser resultatene fra en simultantest på tids-dummiene i modell 3.</p>
<p><strong>F-verdi</strong>: 9.1943</p>
<p><strong>p-verdi</strong>: &lt; 2.2e-16 (enda lavere enn de to foregående modellene)</p>
<p>For Model 3 er resultatet det samme: den lave p-verdien indikerer at tids-dummiene er signifikante for å forklare variasjonen i boligprisene, og derfor bør tids-dummiene inkluderes i modellen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>test_mod3 <span class="ot">&lt;-</span> <span class="fu">linearHypothesis</span>(model3, <span class="fu">matchCoefs</span>(model3, <span class="st">"year_month"</span>), <span class="at">white.adjust =</span> <span class="st">"hc3"</span>)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>test_mod3_table <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(test_mod3)</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>table_data3 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">Model =</span> <span class="fu">c</span>(<span class="st">"Restricted Model"</span>, <span class="st">"Model 3"</span>),</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">Res.Df</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">21192</span>, <span class="dv">21180</span>),  </span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">Df =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">12</span>),  </span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">F =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="fl">9.1943</span>), </span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">`</span><span class="at">Pr(&gt;F)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="fl">2.2e-16</span>),  </span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">Significance =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="st">"***"</span>)</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>table_data3 <span class="sc">%&gt;%</span></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">flextable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_header_labels</span>(</span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">Model =</span> <span class="st">"Model Description"</span>,</span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Res.Df</span><span class="st">`</span> <span class="ot">=</span> <span class="st">"Res. Df"</span>,</span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">Df =</span> <span class="st">"Df"</span>,</span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">F =</span> <span class="st">"F-Statistic"</span>,</span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Pr(&gt;F)</span><span class="st">`</span> <span class="ot">=</span> <span class="st">"P-Value"</span>,</span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">Significance =</span> <span class="st">"Significance"</span></span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a>  )  <span class="sc">|&gt;</span> </span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colformat_double</span>(<span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="tbl-4" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabell&nbsp;4: Simultan test på tids-dummiene for Modell 3
</figcaption>
<div aria-describedby="tbl-4-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-ed00ddea{}.cl-ecfe33b0{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-ecff4818{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-ecff482c{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-ecff542a{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ecff5434{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ecff5435{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ecff543e{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ecff543f{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ecff5440{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-ed00ddea"><thead><tr style="overflow-wrap:break-word;"><th class="cl-ecff542a"><p class="cl-ecff4818"><span class="cl-ecfe33b0">Model Description</span></p></th><th class="cl-ecff5434"><p class="cl-ecff482c"><span class="cl-ecfe33b0">Res. Df</span></p></th><th class="cl-ecff5434"><p class="cl-ecff482c"><span class="cl-ecfe33b0">Df</span></p></th><th class="cl-ecff5434"><p class="cl-ecff482c"><span class="cl-ecfe33b0">F-Statistic</span></p></th><th class="cl-ecff5434"><p class="cl-ecff482c"><span class="cl-ecfe33b0">Pr..F.</span></p></th><th class="cl-ecff542a"><p class="cl-ecff4818"><span class="cl-ecfe33b0">Significance</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-ecff5435"><p class="cl-ecff4818"><span class="cl-ecfe33b0">Restricted Model</span></p></td><td class="cl-ecff543e"><p class="cl-ecff482c"><span class="cl-ecfe33b0">21,192.000</span></p></td><td class="cl-ecff543e"><p class="cl-ecff482c"><span class="cl-ecfe33b0"></span></p></td><td class="cl-ecff543e"><p class="cl-ecff482c"><span class="cl-ecfe33b0"></span></p></td><td class="cl-ecff543e"><p class="cl-ecff482c"><span class="cl-ecfe33b0"></span></p></td><td class="cl-ecff5435"><p class="cl-ecff4818"><span class="cl-ecfe33b0"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-ecff543f"><p class="cl-ecff4818"><span class="cl-ecfe33b0">Model 3</span></p></td><td class="cl-ecff5440"><p class="cl-ecff482c"><span class="cl-ecfe33b0">21,180.000</span></p></td><td class="cl-ecff5440"><p class="cl-ecff482c"><span class="cl-ecfe33b0">12.000</span></p></td><td class="cl-ecff5440"><p class="cl-ecff482c"><span class="cl-ecfe33b0">9.194</span></p></td><td class="cl-ecff5440"><p class="cl-ecff482c"><span class="cl-ecfe33b0">0.000</span></p></td><td class="cl-ecff543f"><p class="cl-ecff4818"><span class="cl-ecfe33b0">***</span></p></td></tr></tbody></table></div>
</div>
</div>
</figure>
</div>
</div>
<p>For alle tre modellene er p-verdiene ekstremt lave, langt under 0.05, noe som indikerer at tids-dummiene samlet sett har en signifikant effekt på modellene. Med andre ord, tids-dummiene bør inkluderes i alle modellene fordi de bidrar til å forklare variasjonen i boligprisene over tid. Dette betyr at tidsvariasjon er viktig for å modellere boligprisene i dette datasettet.</p>
</section>
</section>
<section id="spatial-regressions" class="level1" data-number="10">
<h1 data-number="10"><span class="header-section-number">10</span> Spatial Regressions</h1>
<p>Videre skal vi utføre «spatial regressions» på et subset på ca. 2000 observasjoner fra det totale datasettet. Vi skal finne ut hvilken romlig regresjonsmodell som best fanger opp de romlige effektene. Vi skal se på valg av modell ved hjelp av metodene til både <span class="citation" data-cites="anselin1988">Anselin (<a href="#ref-anselin1988" role="doc-biblioref">1988</a>)</span> og <span class="citation" data-cites="lesage">LeSage (<a href="#ref-lesage" role="doc-biblioref">u.å.</a>)</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">"MandD/kc_house_data_4242.gpkg"</span>)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Reading layer `kc_house_data_4242' from data source 
  `/Users/ag/Dev/innleveringer_h24/msb205/innleveringer/msb205arb_HIJ/MandD/kc_house_data_4242.gpkg' 
  using driver `GPKG'
Simple feature collection with 1887 features and 51 fields
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: 1228997 ymin: 61256.69 xmax: 1500194 ymax: 287483.2
Projected CRS: NAD83(HARN) / Washington North (ftUS)</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Legger til områdevariabler fra 'tracts10'</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>tracts10_selected <span class="ot">&lt;-</span> tracts10 <span class="sc">%&gt;%</span> <span class="fu">select</span>(andel_hvit_alene, andel_svart_alene, andel_asiatisk_alene, andel_andre_alene, andel_blandet)</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Slår sammen 'data' med områdevariablene fra 'tracts10'</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>data_with_area_vars <span class="ot">&lt;-</span> <span class="fu">st_join</span>(data, tracts10_selected, <span class="at">join =</span> st_intersects)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="ols-modell-og-spatial-effects" class="level1" data-number="11">
<h1 data-number="11"><span class="header-section-number">11</span> OLS-modell og “Spatial effects”</h1>
<p>Før vi går over på romlige regresjonsmodeller skal vi presentere modellen vi ønsker å bruke. Vi kjører den som en OLS-modell og ser nærmere på residualene for å avgjøre om vi har uforklarte “spatial effects” i residualene. Dette gjøres ved hjelp av Moran`s I tester. Modellen er spesifisert i <a href="#eq-mod4" class="quarto-xref">Ligning&nbsp;4</a>.</p>
<p><span id="eq-mod4"><span class="math display">\[
\begin{aligned}
P_i &amp;= \beta_0 + \beta_1 \cdot \text{bedrooms}_i + \beta_2 \cdot \text{bathrooms}_i + \beta_3 \cdot \text{sqft\_living}_i + \beta_4 \cdot \text{sqft\_lot}_i\\
&amp;+ \beta_5 \cdot \text{floors}_i + \beta_6 \cdot \text{andel\_hvit\_alene}_i + \beta_7 \cdot \text{andel\_svart\_alene}_i\\
&amp;+ \beta_8 \cdot \text{andel\_asiatisk\_alene}_i + \beta_9 \cdot \text{andel\_andre\_alene}_i + \beta_{10} \cdot \text{andel\_blandet}_i + \epsilon_i
\end{aligned}
\tag{4}\]</span></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Kjøre en lineær modell (OLS) med områdevariabler</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>model_ols <span class="ot">&lt;-</span> <span class="fu">lm</span>(price <span class="sc">~</span> bedrooms <span class="sc">+</span> bathrooms <span class="sc">+</span> sqft_living <span class="sc">+</span> sqft_lot <span class="sc">+</span> floors <span class="sc">+</span> </span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>                andel_hvit_alene <span class="sc">+</span> andel_svart_alene <span class="sc">+</span> andel_asiatisk_alene <span class="sc">+</span> </span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>                andel_andre_alene <span class="sc">+</span> andel_blandet, <span class="at">data =</span> data_with_area_vars)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Beregn residualene fra modellen</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>residuals_ols <span class="ot">&lt;-</span> <span class="fu">residuals</span>(model_ols)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Vektmatriser for k = 3 og k = 10 nærmeste naboer</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>coords <span class="ot">&lt;-</span> <span class="fu">st_coordinates</span>(data_with_area_vars)</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>knn3 <span class="ot">&lt;-</span> <span class="fu">knearneigh</span>(coords, <span class="at">k =</span> <span class="dv">3</span>)</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>knn10 <span class="ot">&lt;-</span> <span class="fu">knearneigh</span>(coords, <span class="at">k =</span> <span class="dv">10</span>)</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>nb3 <span class="ot">&lt;-</span> <span class="fu">knn2nb</span>(knn3)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in knn2nb(knn3): neighbour object has 26 sub-graphs</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>nb10 <span class="ot">&lt;-</span> <span class="fu">knn2nb</span>(knn10)</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>lw3 <span class="ot">&lt;-</span> <span class="fu">nb2listw</span>(nb3, <span class="at">style =</span> <span class="st">"W"</span>)</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>lw10 <span class="ot">&lt;-</span> <span class="fu">nb2listw</span>(nb10, <span class="at">style =</span> <span class="st">"W"</span>)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tbl-5" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-5-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabell&nbsp;5: Moran`s I test for 3 nærmeste naboer (k = 3)
</figcaption>
<div aria-describedby="tbl-5-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Utfør Moran's I-test</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>moran_test_ols_k3 <span class="ot">&lt;-</span> <span class="fu">lm.morantest</span>(model_ols, lw3) </span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(moran_test_ols_k3)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Global Moran I for regression residuals

data:  
model: lm(formula = price ~ bedrooms + bathrooms + sqft_living +
sqft_lot + floors + andel_hvit_alene + andel_svart_alene +
andel_asiatisk_alene + andel_andre_alene + andel_blandet, data =
data_with_area_vars)
weights: lw3

Moran I statistic standard deviate = 25.384, p-value &lt; 2.2e-16
alternative hypothesis: greater
sample estimates:
Observed Moran I      Expectation         Variance 
    0.4421560581    -0.0025985312     0.0003069769 </code></pre>
</div>
</div>
</figure>
</div>
<div id="tbl-6" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-6-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabell&nbsp;6: Moran`s I test for 10 nærmeste naboer (k=10)
</figcaption>
<div aria-describedby="tbl-6-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Utfør Moran's I-test</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>moran_test_ols_k10 <span class="ot">&lt;-</span> <span class="fu">lm.morantest</span>(model_ols, lw10)</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(moran_test_ols_k10)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Global Moran I for regression residuals

data:  
model: lm(formula = price ~ bedrooms + bathrooms + sqft_living +
sqft_lot + floors + andel_hvit_alene + andel_svart_alene +
andel_asiatisk_alene + andel_andre_alene + andel_blandet, data =
data_with_area_vars)
weights: lw10

Moran I statistic standard deviate = 40.616, p-value &lt; 2.2e-16
alternative hypothesis: greater
sample estimates:
Observed Moran I      Expectation         Variance 
    0.3904096022    -0.0020984966     0.0000933904 </code></pre>
</div>
</div>
</figure>
</div>
<p><a href="#tbl-5" class="quarto-xref">Tabell&nbsp;5</a> presenterer resultatene fra Moran`s I testen for 3 nærmeste naboer, mens <a href="#tbl-6" class="quarto-xref">Tabell&nbsp;6</a> viser resultatene fra Moran’s I-testen for 10 nærmeste naboer. Funnene indikerer at det er en signifikant romlig autokorrelasjon i residualene for både 3 og 10 nærmeste naboer. For Moran’s I med 3 naboer fikk vi en observert Moran I-verdi på 0.442 med ett standardavvik på 25.384 og en p-verdi på mindre enn 2.2e-16. For Moran’s I med 10 naboer var den observerte Moran I-verdien 0.390 med ett standardavvik på 40.616 og en p-verdi på mindre enn 2.2e-16. Begge testene gir svært lave p-verdier, noe som betyr at vi kan forkaste nullhypotesen om ingen romlig autokorrelasjon i residualene. Moran’s I-verdiene for både 3 og 10 naboer er positive og signifikante, noe som indikerer at residualene fra modellen er spatialt korrelerte. Dette betyr at det er spatial avhengighet som modellen ikke har klart å fange opp. Den romlige korrelasjonen er noe sterkere for nærmeste 3 naboer sammenlignet med nærmeste 10 naboer, noe som tyder på at den romlige korrelasjonen kan være mer lokal i naturen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualiser Moran Plot for OLS-residualene</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">moran.plot</span>(residuals_ols, <span class="at">listw =</span> lw3, <span class="at">main =</span> <span class="st">"Moran Plot for OLS Residualer (k = 3)"</span>)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-6" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-6-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="arbeidskrav_files/figure-html/fig-6-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-6-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figur&nbsp;6: Morans plott for OLS residualer k = 3
</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">moran.plot</span>(residuals_ols, <span class="at">listw =</span> lw10, <span class="at">main =</span> <span class="st">"Moran Plot for OLS Residualer (k = 10)"</span>)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-7" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-7-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="arbeidskrav_files/figure-html/fig-7-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-7-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figur&nbsp;7: Moran`s plott for OLS residualer k = 10
</figcaption>
</figure>
</div>
</div>
</div>
<p>Moran-plottene for OLS-residualene presentert i <a href="#fig-6" class="quarto-xref">Figur&nbsp;6</a> og <a href="#fig-7" class="quarto-xref">Figur&nbsp;7</a> gir en visuell representasjon av romlig autokorrelasjon i modellens residualer. Moran-plottene viser forholdet mellom residualene (x-aksen) og de spatialt forsinkede residualene (y-aksen), og gjør det mulig å vurdere om det finnes systematiske romlige mønstre. Moran-plottet for 3 nærmeste naboer indikerer en positiv romlig autokorrelasjon. Vi kan se at flere datapunkter ligger i kvadrantene som representerer lav-lav og høy-høy, noe som betyr at områder med høye restverdier tenderer til å være nær andre områder med høye restverdier, og tilsvarende for lave verdier. Den stigende trenden i plottet bekrefter også at det er en klar sammenheng mellom restverdiene og deres spatialt forsinkede motparter. Moran-plottet for 10 nærmeste naboer har en lignende trend som for 3 nærmeste naboer, men sammenhengen ser noe svakere ut. Dette skyldes sannsynligvis at k = 10 inkluderer flere naboer, noe som utjevner den lokale romlige korrelasjonen. Den stigende linjen indikerer fortsatt at det er en positiv romlig autokorrelasjon, men denne effekten blir noe mindre markant når flere naboer inkluderes.</p>
<p>Funnene fra Morans I testene og plottene indikerer at OLS-modellen ikke er tilstrekkelig i å fange opp alle de romlige forholdene som påvirker boligprisene. For å håndtere denne romlige autokorrelasjonen bør det vurderes å bruke romlige regresjonsmodeller, noe vi skal ser nærmere på videre i oppgaven.</p>
</section>
<section id="anselin" class="level1" data-number="12">
<h1 data-number="12"><span class="header-section-number">12</span> Anselin</h1>
<p>Her blir <span class="citation" data-cites="anselin1988">Anselin (<a href="#ref-anselin1988" role="doc-biblioref">1988</a>)</span> sin teknikk med Lagrange multiplikator test brukt og videre diskuteres det hvilken modell (SAR, SEM eller lm (OLS)) som synes å være den beste. Vi undersøker både for 3 og 10 nærmeste naboer.</p>
<section id="langrange-multiplikator-test-for-3-nærmeste-naboer" class="level2" data-number="12.1">
<h2 data-number="12.1" class="anchored" data-anchor-id="langrange-multiplikator-test-for-3-nærmeste-naboer"><span class="header-section-number">12.1</span> Langrange multiplikator test for 3 nærmeste naboer</h2>
<p><a href="#tbl-7" class="quarto-xref">Tabell&nbsp;7</a> gir en oversikt over lagrange multiplikator testen for 3 nærmeste naboer (k=3).</p>
<div id="tbl-7" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-7-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabell&nbsp;7: Lagrange Multiplikator-test for k=3
</figcaption>
<div aria-describedby="tbl-7-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Lagrange Multiplikator tester med k = 3</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>lm_tests3 <span class="ot">&lt;-</span> <span class="fu">lm.LMtests</span>(model_ols, lw3, <span class="at">test =</span> <span class="st">"all"</span>)</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(lm_tests3)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Rao's score (a.k.a Lagrange multiplier) diagnostics for spatial
    dependence

data:  
model: lm(formula = price ~ bedrooms + bathrooms + sqft_living +
sqft_lot + floors + andel_hvit_alene + andel_svart_alene +
andel_asiatisk_alene + andel_andre_alene + andel_blandet, data =
data_with_area_vars)
test weights: listw

RSerr = 632.79, df = 1, p-value &lt; 2.2e-16


    Rao's score (a.k.a Lagrange multiplier) diagnostics for spatial
    dependence

data:  
model: lm(formula = price ~ bedrooms + bathrooms + sqft_living +
sqft_lot + floors + andel_hvit_alene + andel_svart_alene +
andel_asiatisk_alene + andel_andre_alene + andel_blandet, data =
data_with_area_vars)
test weights: listw

RSlag = 597.42, df = 1, p-value &lt; 2.2e-16


    Rao's score (a.k.a Lagrange multiplier) diagnostics for spatial
    dependence

data:  
model: lm(formula = price ~ bedrooms + bathrooms + sqft_living +
sqft_lot + floors + andel_hvit_alene + andel_svart_alene +
andel_asiatisk_alene + andel_andre_alene + andel_blandet, data =
data_with_area_vars)
test weights: listw

adjRSerr = 99.077, df = 1, p-value &lt; 2.2e-16


    Rao's score (a.k.a Lagrange multiplier) diagnostics for spatial
    dependence

data:  
model: lm(formula = price ~ bedrooms + bathrooms + sqft_living +
sqft_lot + floors + andel_hvit_alene + andel_svart_alene +
andel_asiatisk_alene + andel_andre_alene + andel_blandet, data =
data_with_area_vars)
test weights: listw

adjRSlag = 63.709, df = 1, p-value = 1.443e-15


    Rao's score (a.k.a Lagrange multiplier) diagnostics for spatial
    dependence

data:  
model: lm(formula = price ~ bedrooms + bathrooms + sqft_living +
sqft_lot + floors + andel_hvit_alene + andel_svart_alene +
andel_asiatisk_alene + andel_andre_alene + andel_blandet, data =
data_with_area_vars)
test weights: listw

SARMA = 696.5, df = 2, p-value &lt; 2.2e-16</code></pre>
</div>
</div>
</figure>
</div>
<p><strong>OLS-modellen</strong>: Basert på de svært signifikante p-verdiene fra alle testene, kan vi konkludere med at OLS-modellen ikke klarer å håndtere romlige avhengigheter i dataene på en tilfredsstillende måte. Residualene fra OLS-modellen viser klare tegn på romlig autokorrelasjon, og dette betyr at en modell som tar hensyn til disse effektene vil være mer hensiktsmessig.</p>
<p><strong>Spatial Error Model (SEM)</strong>: Teststatistikken for RSerr og adjRSerr er høy, og begge testene er svært signifikante. Dette tyder på at romlig avhengighet primært eksisterer i errorleddene, noe som gjør SEM til en god kandidat for videre modellering.</p>
<p><strong>Spatial Lag Model (SAR)</strong>: Teststatistikken for RSlag og adjRSlag er også høy og signifikant, noe som indikerer at romlig avhengighet også finnes i selve avhengighetsforholdene i modellen. SAR-modellen vil derfor kunne være en god modell for å fange opp disse effektene.</p>
<p>Gitt resultatene fra Lagrange multiplikator-testene, synes både SEM og SAR å være aktuelle modeller for å håndtere de romlige avhengighetene. Valget mellom de to modellene avhenger av hvilken type romlig avhengighet som antas å være mest relevant:</p>
<ul>
<li>Hvis romlig avhengighet antas å påvirke feilleddene, er SEM den beste modellen.</li>
<li>Hvis romlig avhengighet antas å være i den avhengige variabelens forhold til de forklarende variablene, vil SAR være mer hensiktsmessig.</li>
</ul>
</section>
<section id="langrange-multiplikator-test-for-10-nærmeste-naboer" class="level2" data-number="12.2">
<h2 data-number="12.2" class="anchored" data-anchor-id="langrange-multiplikator-test-for-10-nærmeste-naboer"><span class="header-section-number">12.2</span> Langrange multiplikator test for 10 nærmeste naboer</h2>
<p><a href="#tbl-8" class="quarto-xref">Tabell&nbsp;8</a> gir en oversikt over resultatene fra langrange multiplikator test for 10 nærmeste naboer (k=10).</p>
<div id="tbl-8" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-8-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabell&nbsp;8: Lagrange Multiplikator-test for k=10
</figcaption>
<div aria-describedby="tbl-8-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Lagrange Multiplikator tester med k = 10</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>lm_tests10 <span class="ot">&lt;-</span> <span class="fu">lm.LMtests</span>(model_ols, lw10, <span class="at">test =</span> <span class="st">"all"</span>)</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(lm_tests10)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Rao's score (a.k.a Lagrange multiplier) diagnostics for spatial
    dependence

data:  
model: lm(formula = price ~ bedrooms + bathrooms + sqft_living +
sqft_lot + floors + andel_hvit_alene + andel_svart_alene +
andel_asiatisk_alene + andel_andre_alene + andel_blandet, data =
data_with_area_vars)
test weights: listw

RSerr = 1593.2, df = 1, p-value &lt; 2.2e-16


    Rao's score (a.k.a Lagrange multiplier) diagnostics for spatial
    dependence

data:  
model: lm(formula = price ~ bedrooms + bathrooms + sqft_living +
sqft_lot + floors + andel_hvit_alene + andel_svart_alene +
andel_asiatisk_alene + andel_andre_alene + andel_blandet, data =
data_with_area_vars)
test weights: listw

RSlag = 1104.5, df = 1, p-value &lt; 2.2e-16


    Rao's score (a.k.a Lagrange multiplier) diagnostics for spatial
    dependence

data:  
model: lm(formula = price ~ bedrooms + bathrooms + sqft_living +
sqft_lot + floors + andel_hvit_alene + andel_svart_alene +
andel_asiatisk_alene + andel_andre_alene + andel_blandet, data =
data_with_area_vars)
test weights: listw

adjRSerr = 568.87, df = 1, p-value &lt; 2.2e-16


    Rao's score (a.k.a Lagrange multiplier) diagnostics for spatial
    dependence

data:  
model: lm(formula = price ~ bedrooms + bathrooms + sqft_living +
sqft_lot + floors + andel_hvit_alene + andel_svart_alene +
andel_asiatisk_alene + andel_andre_alene + andel_blandet, data =
data_with_area_vars)
test weights: listw

adjRSlag = 80.235, df = 1, p-value &lt; 2.2e-16


    Rao's score (a.k.a Lagrange multiplier) diagnostics for spatial
    dependence

data:  
model: lm(formula = price ~ bedrooms + bathrooms + sqft_living +
sqft_lot + floors + andel_hvit_alene + andel_svart_alene +
andel_asiatisk_alene + andel_andre_alene + andel_blandet, data =
data_with_area_vars)
test weights: listw

SARMA = 1673.4, df = 2, p-value &lt; 2.2e-16</code></pre>
</div>
</div>
</figure>
</div>
<p><strong>OLS-modellen</strong>: Gitt de svært signifikante p-verdiene fra alle testene, ser vi at OLS-modellen ikke klarer å håndtere romlige avhengigheter i dataene. Residualene fra OLS-modellen viser tydelige tegn på romlig autokorrelasjon, noe som gjør at en annen modell er nødvendig.</p>
<p><strong>Spatial Error Model (SEM)</strong>: RSerr og adjRSerr har de høyeste teststatistikkene og svært signifikante p-verdier. Dette tyder på at den romlige avhengigheten hovedsakelig ligger i errorleddene, og at en SEM derfor vil være en passende modell for videre analyse.</p>
<p><strong>Spatial Lag Model (SAR)</strong>: RSlag og adjRSlag viser også signifikante resultater, men teststatistikkene er lavere sammenlignet med SEM. Dette kan indikere at selv om det er en romlig avhengighet i den avhengige variabelen, er denne effekten ikke like sterk som den romlige avhengigheten i errorleddene. SAR-modellen kan være et alternativ, men SEM virker å være mer relevant basert på testresultatene.</p>
<p>Basert på resultatene fra Lagrange multiplikator-testene med k = 10, virker Spatial Error Model (SEM) å være det beste alternativet for å håndtere de romlige avhengighetene i dataene. Teststatistikken for RSerr og adjRSerr er høyere enn for RSlag og adjRSlag, noe som tyder på at romlig avhengighet primært er til stede i errorleddene. Dette betyr at en SEM-modell kan gi en bedre modelltilpasning enn SAR.</p>
</section>
<section id="konklusjon-2" class="level2" data-number="12.3">
<h2 data-number="12.3" class="anchored" data-anchor-id="konklusjon-2"><span class="header-section-number">12.3</span> Konklusjon</h2>
<p>Samlet sett peker Lagrange Multiplikator-testene mot at en Spatial Error Model (SEM) vil være den mest passende modellen for dette datasettet. En SEM-modell vil kunne håndtere den observerte spatial avhengigheten ved å modellere romlige effekter i feilkomponenten, noe som sannsynligvis gir en bedre forståelse og kontroll av romlige mønstre i boligprisene enn en SAR- eller OLS-modell ville ha gjort.</p>
</section>
<section id="sar" class="level2" data-number="12.4">
<h2 data-number="12.4" class="anchored" data-anchor-id="sar"><span class="header-section-number">12.4</span> SAR</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Estimer SAR-modellen med vektmatrisen for k = 3 nærmeste naboer</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>sar_model_k3 <span class="ot">&lt;-</span> <span class="fu">lagsarlm</span>(</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> price <span class="sc">~</span> bedrooms <span class="sc">+</span> bathrooms <span class="sc">+</span> sqft_living <span class="sc">+</span> sqft_lot <span class="sc">+</span> floors <span class="sc">+</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>    andel_hvit_alene <span class="sc">+</span> andel_svart_alene <span class="sc">+</span> andel_asiatisk_alene <span class="sc">+</span> andel_andre_alene <span class="sc">+</span> andel_blandet,</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> data_with_area_vars,</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">listw =</span> lw3,</span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">method =</span> <span class="st">"eigen"</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Estimer SAR-modellen med vektmatrisen for k = 10 nærmeste naboer</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>sar_model_k10 <span class="ot">&lt;-</span> <span class="fu">lagsarlm</span>(</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">formula =</span> price <span class="sc">~</span> bedrooms <span class="sc">+</span> bathrooms <span class="sc">+</span> sqft_living <span class="sc">+</span> sqft_lot <span class="sc">+</span> floors <span class="sc">+</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>    andel_hvit_alene <span class="sc">+</span> andel_svart_alene <span class="sc">+</span> andel_asiatisk_alene <span class="sc">+</span> andel_andre_alene <span class="sc">+</span> andel_blandet,</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> data_with_area_vars,</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">listw =</span> lw10,</span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">method =</span> <span class="st">"eigen"</span></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in lagsarlm(formula = price ~ bedrooms + bathrooms + sqft_living + :
Aliased variables found: andel_blandet</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in lagsarlm(formula = price ~ bedrooms + bathrooms + sqft_living + : inversion of asymptotic covariance matrix failed for tol.solve = 2.22044604925031e-16 
  reciprocal condition number = 3.61831e-23 - using numerical Hessian.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in sqrt(diag(fdHess)[-1]): NaNs produced</code></pre>
</div>
</div>
<p><a href="#tbl-9" class="quarto-xref">Tabell&nbsp;9</a> gir et sammendrag av resultatene fra SAR-modellen med 3 nærmeste naboer.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(sar_model_k3) <span class="sc">|&gt;</span> </span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>() <span class="sc">|&gt;</span> </span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="at">.f =</span> <span class="st">"rho"</span>)  <span class="sc">|&gt;</span> </span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_vector</span>() <span class="sc">|&gt;</span> </span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>(<span class="at">rownames =</span> <span class="st">"Term"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">flextable</span>() <span class="sc">|&gt;</span> </span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colformat_double</span>(<span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="tbl-9" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-9-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabell&nbsp;9: Resultater fra SAR-modellen (k=3)
</figcaption>
<div aria-describedby="tbl-9-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-ed8468cc{}.cl-ed81aee8{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-ed82d494{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-ed82d49e{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-ed82e038{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ed82e042{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ed82e043{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ed82e044{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-ed8468cc"><thead><tr style="overflow-wrap:break-word;"><th class="cl-ed82e038"><p class="cl-ed82d494"><span class="cl-ed81aee8">Term</span></p></th><th class="cl-ed82e042"><p class="cl-ed82d49e"><span class="cl-ed81aee8">value</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-ed82e043"><p class="cl-ed82d494"><span class="cl-ed81aee8">rho</span></p></td><td class="cl-ed82e044"><p class="cl-ed82d49e"><span class="cl-ed81aee8">0.452</span></p></td></tr></tbody></table></div>
</div>
</div>
</figure>
</div>
</div>
<p><a href="#tbl-10" class="quarto-xref">Tabell&nbsp;10</a> gir et sammendrag av resultatene for SAR-modellen med 10 nærmeste naboer.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Se resultatene fra SAR-modellen for k = 10</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(sar_model_k10) <span class="sc">|&gt;</span> </span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>() <span class="sc">|&gt;</span> </span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="at">.f =</span> <span class="st">"rho"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_vector</span>() <span class="sc">|&gt;</span> </span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>(<span class="at">rownames =</span> <span class="st">"Term"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">flextable</span>() <span class="sc">|&gt;</span> </span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colformat_double</span>(<span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="tbl-10" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-10-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabell&nbsp;10: Resultater fra SAR-modellen (k=10)
</figcaption>
<div aria-describedby="tbl-10-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-ed8baea2{}.cl-ed891a48{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-ed8a203c{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-ed8a2046{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-ed8a2afa{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ed8a2b04{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ed8a2b05{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-ed8a2b06{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-ed8baea2"><thead><tr style="overflow-wrap:break-word;"><th class="cl-ed8a2afa"><p class="cl-ed8a203c"><span class="cl-ed891a48">Term</span></p></th><th class="cl-ed8a2b04"><p class="cl-ed8a2046"><span class="cl-ed891a48">value</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-ed8a2b05"><p class="cl-ed8a203c"><span class="cl-ed891a48">rho</span></p></td><td class="cl-ed8a2b06"><p class="cl-ed8a2046"><span class="cl-ed891a48">0.624</span></p></td></tr></tbody></table></div>
</div>
</div>
</figure>
</div>
</div>
<p><a href="#tbl-11" class="quarto-xref">Tabell&nbsp;11</a> viser impacts for SAR-modellen med 3 nærmeste naboer.</p>
<div id="tbl-11" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-11-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabell&nbsp;11: Impacts for SAR-modellen (k=3)
</figcaption>
<div aria-describedby="tbl-11-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>effects_k3 <span class="ot">&lt;-</span> <span class="fu">impacts</span>(sar_model_k3, <span class="at">listw =</span> lw3)</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(effects_k3)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Impact measures (lag, exact):
                            Direct      Indirect         Total
bedrooms             -4.257141e+04 -2.992584e+04 -7.249725e+04
bathrooms            -1.130778e+03 -7.948873e+02 -1.925665e+03
sqft_living           2.762187e+02  1.941696e+02  4.703883e+02
sqft_lot             -2.938421e-01 -2.065581e-01 -5.004002e-01
floors               -3.731296e+03 -2.622938e+03 -6.354235e+03
andel_hvit_alene      6.970879e+04  4.900223e+04  1.187110e+05
andel_svart_alene    -1.051056e+05 -7.388462e+04 -1.789902e+05
andel_asiatisk_alene -1.262393e+04 -8.874069e+03 -2.149799e+04
andel_andre_alene    -2.485331e+05 -1.747079e+05 -4.232409e+05</code></pre>
</div>
</div>
</figure>
</div>
<p><a href="#tbl-12" class="quarto-xref">Tabell&nbsp;12</a> viser impacts for SAR-modellen med 10 nærmeste naboer.</p>
<div id="tbl-12" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-12-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabell&nbsp;12: Impacts for SAR-modellen (k=10)
</figcaption>
<div aria-describedby="tbl-12-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>effects_k10 <span class="ot">&lt;-</span> <span class="fu">impacts</span>(sar_model_k10, <span class="at">listw =</span> lw10)</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(effects_k10)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Impact measures (lag, exact):
                            Direct      Indirect         Total
bedrooms             -4.362077e+04 -6.597472e+04 -1.095955e+05
bathrooms             3.151765e+03  4.766922e+03  7.918686e+03
sqft_living           2.737506e+02  4.140372e+02  6.877878e+02
sqft_lot             -2.060986e-01 -3.117161e-01 -5.178146e-01
floors               -7.203010e+03 -1.089427e+04 -1.809728e+04
andel_hvit_alene     -1.405557e+05 -2.125851e+05 -3.531409e+05
andel_svart_alene    -1.037191e+05 -1.568712e+05 -2.605903e+05
andel_asiatisk_alene -2.792645e+05 -4.223768e+05 -7.016413e+05
andel_andre_alene    -2.539032e+05 -3.840187e+05 -6.379219e+05</code></pre>
</div>
</div>
</figure>
</div>
<p>Ved å bruke impacts()-funksjonen på SAR-modellen kan vi få nøyaktige tall for både direkte, indirekte og totale effekter, som gir en mer detaljert økonomisk tolkning av hvordan uklie atributter påvirker boligprisene i et romlig perspektiv.</p>
</section>
</section>
<section id="lesage" class="level1" data-number="13">
<h1 data-number="13"><span class="header-section-number">13</span> LeSage</h1>
<p>Vi skal nå bruke teknikken med nestede modeller anbefalt av <span class="citation" data-cites="lesage">LeSage (<a href="#ref-lesage" role="doc-biblioref">u.å.</a>)</span>, før vi tester de nestede modellne ved hjelp av en <em>likelihood ratio test</em> for å finne ut hvilken modell som synes å være den beste.</p>
<section id="lokalt-eller-globalt-fenomen" class="level2" data-number="13.1">
<h2 data-number="13.1" class="anchored" data-anchor-id="lokalt-eller-globalt-fenomen"><span class="header-section-number">13.1</span> Lokalt eller globalt fenomen?</h2>
<p>Vi har en høyere Moran`s I verdi for 3 nærmeste naboer (k=3) enn for 10 nærmeste naboer (k =10), noe som tyder på at den romlige autokorrelasjonen er sterkere når man ser på de nærmeste naboene og svekkes når man inkluderer flere naboer. Dette er et tegn på at fenomenet vi studerer kan være mer lokalt i naturen. Dette antyder at eventuelle romlige avhengigheter eller spillover-effekter påvirker områder i umiddelbar nærhet sterkere enn de mer fjerntliggende. I følge <span class="citation" data-cites="lesage">LeSage (<a href="#ref-lesage" role="doc-biblioref">u.å.</a>)</span> er globale spillover sjeldnere enn lokale spillovers i anvendte modeller innen regional vitenskap, og vi kan derfor si at de fleste romlige spillovers er lokale. Han mener også at bruk av modeller med ulike nivåer av romlig kompleksitet, som SDEM, SLX, og SEM, er fordelaktig når vi studerer et lokalt fenomen. Disse modellene er nestede, noe som betyr at de kan beskrives som spesialtilfeller (SLX og SEM) av en mer generell modellstruktur (SDEM).</p>
</section>
<section id="sdem" class="level2" data-number="13.2">
<h2 data-number="13.2" class="anchored" data-anchor-id="sdem"><span class="header-section-number">13.2</span> SDEM</h2>
<p>En Spatial Durbin Error Model (SDEM) er en romlig regresjonsmodell som tar hensyn til både direkte og indirekte (spillover) effekter i dataene. Den generelle formen for SDEM er:</p>
<p><span class="math inline">\(y =  X \beta + W X \theta + u\)</span></p>
<p><span class="math inline">\(u=λWu+ϵ\)</span></p>
<div class="cell" data-chache="true">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ag: setter på cache på denne siden den er nokså tidkrevende</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>SDEM <span class="ot">&lt;-</span> <span class="fu">errorsarlm</span>(model_ols, <span class="at">data =</span> data_with_area_vars, <span class="at">listw =</span> lw3, <span class="at">Durbin =</span> <span class="cn">TRUE</span>)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><a href="#tbl-13" class="quarto-xref">Tabell&nbsp;13</a> viser resultatene fra SDEM-modellen med 3 nærmeste naboer.</p>
<div id="tbl-13" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-13-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabell&nbsp;13: Resultater fra SDEM-modellen (k=3)
</figcaption>
<div aria-describedby="tbl-13-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(SDEM)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:errorsarlm(formula = model_ols, data = data_with_area_vars, listw = lw3, 
    Durbin = TRUE)

Residuals:
    Min      1Q  Median      3Q     Max 
-628718  -92774   -8054   65279 2609177 

Type: error 
Coefficients: (asymptotic standard errors) 
    (2 not defined because of singularities)
                            Estimate  Std. Error z value  Pr(&gt;|z|)
(Intercept)              -1.6796e+05  3.6627e+05 -0.4586  0.646549
bedrooms                 -4.5825e+04  6.3953e+03 -7.1653 7.760e-13
bathrooms                -2.3926e+03  1.0410e+04 -0.2298  0.818224
sqft_living               2.8357e+02  8.7668e+00 32.3456 &lt; 2.2e-16
sqft_lot                  1.5712e-02  1.0892e-01  0.1442  0.885304
floors                   -1.3412e+04  1.0521e+04 -1.2747  0.202408
andel_hvit_alene          1.3355e+05  2.4288e+05  0.5499  0.582413
andel_svart_alene        -8.3100e+04  2.8742e+05 -0.2891  0.772489
andel_asiatisk_alene      1.6148e+05  2.5609e+05  0.6306  0.528317
andel_andre_alene         1.2948e+05  2.8067e+05  0.4613  0.644567
andel_blandet                     NA          NA      NA        NA
lag.bedrooms             -3.8345e+04  1.2925e+04 -2.9668  0.003009
lag.bathrooms            -1.7204e+04  2.2058e+04 -0.7800  0.435414
lag.sqft_living           9.4158e+01  1.7986e+01  5.2350 1.650e-07
lag.sqft_lot             -1.0153e+00  2.4267e-01 -4.1838 2.866e-05
lag.floors                5.1975e+03  2.1570e+04  0.2410  0.809589
lag.andel_hvit_alene      2.4216e+05  3.6614e+05  0.6614  0.508367
lag.andel_svart_alene    -4.2911e+04  4.1989e+05 -0.1022  0.918602
lag.andel_asiatisk_alene  2.0921e+05  3.7638e+05  0.5559  0.578312
lag.andel_andre_alene    -6.1400e+05  4.2433e+05 -1.4470  0.147894
lag.andel_blandet                 NA          NA      NA        NA

Lambda: 0.5404, LR test value: 519.53, p-value: &lt; 2.22e-16
Approximate (numerical Hessian) standard error: 0.019413
    z-value: 27.837, p-value: &lt; 2.22e-16
Wald statistic: 774.92, p-value: &lt; 2.22e-16

Log likelihood: -25696.93 for error model
ML residual variance (sigma squared): 3.5849e+10, (sigma: 189340)
Number of observations: 1887 
Number of parameters estimated: 21 
AIC: 51436, (AIC for lm: 51953)</code></pre>
</div>
</div>
</figure>
</div>
<p><a href="#tbl-14" class="quarto-xref">Tabell&nbsp;14</a> viser impacts for SDEM-modellen med 3 nærmeste naboer.</p>
<div id="tbl-14" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-14-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabell&nbsp;14: Impacts for SDEM-modellen (k=3)
</figcaption>
<div aria-describedby="tbl-14-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">impacts</span>(SDEM), <span class="at">zstats =</span> <span class="cn">TRUE</span>)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Impact measures (SDEM, glht, n):
                            Direct      Indirect         Total
bedrooms             -4.582452e+04 -3.834490e+04 -8.416942e+04
bathrooms            -2.392563e+03 -1.720437e+04 -1.959693e+04
sqft_living           2.835687e+02  9.415840e+01  3.777271e+02
sqft_lot              1.571189e-02 -1.015303e+00 -9.995908e-01
floors               -1.341159e+04  5.197504e+03 -8.214088e+03
andel_hvit_alene      1.335497e+05  2.421553e+05  3.757050e+05
andel_svart_alene    -8.309993e+04 -4.291080e+04 -1.260107e+05
andel_asiatisk_alene  1.614825e+05  2.092113e+05  3.706938e+05
andel_andre_alene     1.294789e+05 -6.140029e+05 -4.845239e+05
========================================================
Standard errors:
                           Direct     Indirect        Total
bedrooms             6.395322e+03 1.292461e+04 1.691272e+04
bathrooms            1.041015e+04 2.205800e+04 2.868663e+04
sqft_living          8.766837e+00 1.798646e+01 2.277140e+01
sqft_lot             1.089217e-01 2.426719e-01 2.754440e-01
floors               1.052119e+04 2.157029e+04 2.754670e+04
andel_hvit_alene     2.428777e+05 3.661350e+05 3.827030e+05
andel_svart_alene    2.874225e+05 4.198897e+05 4.360161e+05
andel_asiatisk_alene 2.560870e+05 3.763791e+05 3.889472e+05
andel_andre_alene    2.806684e+05 4.243251e+05 4.443816e+05
========================================================
Z-values:
                         Direct   Indirect      Total
bedrooms             -7.1653179 -2.9668138 -4.9766920
bathrooms            -0.2298298 -0.7799605 -0.6831381
sqft_living          32.3456084  5.2349602 16.5877885
sqft_lot              0.1442494 -4.1838490 -3.6290159
floors               -1.2747214  0.2409567 -0.2981877
andel_hvit_alene      0.5498642  0.6613825  0.9817142
andel_svart_alene    -0.2891212 -0.1021954 -0.2890047
andel_asiatisk_alene  0.6305765  0.5558526  0.9530696
andel_andre_alene     0.4613235 -1.4470103 -1.0903329

p-values:
                     Direct     Indirect   Total     
bedrooms             7.7605e-13 0.003009   6.468e-07 
bathrooms            0.81822    0.435414   0.4945196 
sqft_living          &lt; 2.22e-16 1.6502e-07 &lt; 2.22e-16
sqft_lot             0.88530    2.8661e-05 0.0002845 
floors               0.20241    0.809589   0.7655599 
andel_hvit_alene     0.58241    0.508367   0.3262406 
andel_svart_alene    0.77249    0.918602   0.7725778 
andel_asiatisk_alene 0.52832    0.578312   0.3405548 
andel_andre_alene    0.64457    0.147894   0.2755665 </code></pre>
</div>
</div>
</figure>
</div>
</section>
<section id="sem" class="level2" data-number="13.3">
<h2 data-number="13.3" class="anchored" data-anchor-id="sem"><span class="header-section-number">13.3</span> SEM</h2>
<p>En Spatial Error Model (SEM) er en romlig regresjonsmodell som fanger opp romlige autokorrelasjoner i feilleddet, i stedet for å inkorporere romlige effekter direkte i de uavhengige variablene. Den generelle formen for SEM er:</p>
<p><span class="math inline">\(y = X \beta + u\)</span> <span class="math inline">\(u = \lambda Wu +  \epsilon\)</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Spatial Error Model (SEM)</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>SEM <span class="ot">&lt;-</span> <span class="fu">errorsarlm</span>(price <span class="sc">~</span> bedrooms <span class="sc">+</span> bathrooms <span class="sc">+</span> sqft_living <span class="sc">+</span> sqft_lot <span class="sc">+</span> floors <span class="sc">+</span> </span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>                  andel_hvit_alene <span class="sc">+</span> andel_svart_alene <span class="sc">+</span> andel_asiatisk_alene <span class="sc">+</span> </span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>                  andel_andre_alene <span class="sc">+</span> andel_blandet, </span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">data =</span> data_with_area_vars, <span class="at">listw =</span> lw3)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><a href="#tbl-15" class="quarto-xref">Tabell&nbsp;15</a> viser resultatene for SEM-modellen med 3 nærmeste naboer.</p>
<div id="tbl-15" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-15-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabell&nbsp;15: Resultater for SEM-modellen (k=3)
</figcaption>
<div aria-describedby="tbl-15-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:errorsarlm(formula = price ~ bedrooms + bathrooms + sqft_living + 
    sqft_lot + floors + andel_hvit_alene + andel_svart_alene + 
    andel_asiatisk_alene + andel_andre_alene + andel_blandet, 
    data = data_with_area_vars, listw = lw3)

Residuals:
    Min      1Q  Median      3Q     Max 
-608387  -93418  -12051   64325 2743882 

Type: error 
Coefficients: (asymptotic standard errors) 
    (1 not defined because of singularities)
                        Estimate  Std. Error z value  Pr(&gt;|z|)
(Intercept)          -1.6883e+05  2.2599e+05 -0.7471    0.4550
bedrooms             -3.6648e+04  5.6685e+03 -6.4651 1.012e-10
bathrooms             2.4341e+03  9.1056e+03  0.2673    0.7892
sqft_living           2.6699e+02  8.1579e+00 32.7282 &lt; 2.2e-16
sqft_lot              1.3072e-01  1.0935e-01  1.1955    0.2319
floors               -1.3598e+04  9.6991e+03 -1.4019    0.1609
andel_hvit_alene      3.5891e+05  2.3868e+05  1.5037    0.1327
andel_svart_alene    -1.9037e+05  2.7984e+05 -0.6803    0.4963
andel_asiatisk_alene  3.9118e+05  2.4748e+05  1.5806    0.1140
andel_andre_alene    -5.9923e+04  2.7801e+05 -0.2155    0.8293
andel_blandet                 NA          NA      NA        NA

Lambda: 0.57719, LR test value: 595.78, p-value: &lt; 2.22e-16
Approximate (numerical Hessian) standard error: 0.018841
    z-value: 30.635, p-value: &lt; 2.22e-16
Wald statistic: 938.53, p-value: &lt; 2.22e-16

Log likelihood: -25739.05 for error model
ML residual variance (sigma squared): 3.6864e+10, (sigma: 192000)
Number of observations: 1887 
Number of parameters estimated: 12 
AIC: 51502, (AIC for lm: 52096)</code></pre>
</div>
</div>
</figure>
</div>
</section>
<section id="slx" class="level2" data-number="13.4">
<h2 data-number="13.4" class="anchored" data-anchor-id="slx"><span class="header-section-number">13.4</span> SLX</h2>
<p>En Spatial Lag of X (SLX)-modell er en romlig regresjonsmodell som tar hensyn til romlige spillover-effekter direkte i de uavhengige variablene. I motsetning til Spatial Error Model (SEM), som fanger opp romlig autokorrelasjon i feilleddet, inkorporerer SLX-modellen romlige effekter ved å inkludere romlige lag av de uavhengige variablene. Den generelle formelen for en SLX-modell er:</p>
<p><span class="math inline">\(y = X \beta + W X \theta + \epsilon\)</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co"># SLX-modell (Spatial Lag of X)</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>SLX <span class="ot">&lt;-</span> <span class="fu">lagsarlm</span>(price <span class="sc">~</span> bedrooms <span class="sc">+</span> bathrooms <span class="sc">+</span> sqft_living <span class="sc">+</span> sqft_lot <span class="sc">+</span> floors <span class="sc">+</span> </span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>                andel_hvit_alene <span class="sc">+</span> andel_svart_alene <span class="sc">+</span> andel_asiatisk_alene <span class="sc">+</span> </span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>                andel_andre_alene <span class="sc">+</span> andel_blandet, </span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">data =</span> data_with_area_vars, <span class="at">listw =</span> lw3, <span class="at">type =</span> <span class="st">"SLX"</span>)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><a href="#tbl-16" class="quarto-xref">Tabell&nbsp;16</a> viser resultatene fra SLX-modellen med 3 nærmeste naboer.</p>
<div id="tbl-16" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-16-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Tabell&nbsp;16: Resultater for SLX-modellen (k=3)
</figcaption>
<div aria-describedby="tbl-16-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(SLX)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:lagsarlm(formula = price ~ bedrooms + bathrooms + sqft_living + 
    sqft_lot + floors + andel_hvit_alene + andel_svart_alene + 
    andel_asiatisk_alene + andel_andre_alene + andel_blandet, 
    data = data_with_area_vars, listw = lw3, type = "SLX")

Residuals:
    Min      1Q  Median      3Q     Max 
-638352  -90348  -10468   64785 2653983 

Type: mixed 
Coefficients: (numerical Hessian approximate standard errors) 
    (2 not defined because of singularities)
                            Estimate  Std. Error z value  Pr(&gt;|z|)
(Intercept)              -1.4741e+05  1.7063e+05 -0.8639   0.38764
bedrooms                 -4.1369e+04  5.6636e+03 -7.3043 2.787e-13
bathrooms                -3.0513e+03  6.1711e+03 -0.4944   0.62099
sqft_living               2.7303e+02  7.8561e+00 34.7544 &lt; 2.2e-16
sqft_lot                  1.3428e-01  1.0917e-01  1.2300   0.21870
floors                   -1.3127e+04  8.9255e+03 -1.4707   0.14137
andel_hvit_alene          7.7124e+04  1.7127e+05  0.4503   0.65249
andel_svart_alene        -1.0715e+05  1.8365e+05 -0.5835   0.55958
andel_asiatisk_alene      9.4307e+04  1.5029e+05  0.6275   0.53034
andel_andre_alene         2.4959e+05  2.0892e+05  1.1947   0.23222
andel_blandet                     NA          NA      NA        NA
lag.bedrooms             -1.0554e+04  9.5360e+03 -1.1067   0.26842
lag.bathrooms            -2.6929e+04  1.6237e+04 -1.6585   0.09723
lag.sqft_living          -6.7106e+01  1.4589e+01 -4.5998 4.228e-06
lag.sqft_lot             -1.1007e+00  1.8956e-01 -5.8064 6.383e-09
lag.floors                2.0898e+04  1.4565e+04  1.4348   0.15133
lag.andel_hvit_alene      1.8987e+05  1.6515e+05  1.1497   0.25027
lag.andel_svart_alene     1.7323e+05  1.5535e+05  1.1151   0.26482
lag.andel_asiatisk_alene  1.5656e+05  1.7102e+05  0.9154   0.35997
lag.andel_andre_alene    -4.0736e+05  2.1857e+05 -1.8638   0.06235
lag.andel_blandet                 NA          NA      NA        NA

Rho: 0.53587, LR test value: 546.82, p-value: &lt; 2.22e-16
Approximate (numerical Hessian) standard error: 0.019174
    z-value: 27.948, p-value: &lt; 2.22e-16
Wald statistic: 781.07, p-value: &lt; 2.22e-16

Log likelihood: -25683.28 for mixed model
ML residual variance (sigma squared): 3.5402e+10, (sigma: 188160)
Number of observations: 1887 
Number of parameters estimated: 21 
AIC: 51409, (AIC for lm: 51953)</code></pre>
</div>
</div>
</figure>
</div>
</section>
<section id="testing-og-sammenligning-av-de-ulike-modellene" class="level2" data-number="13.5">
<h2 data-number="13.5" class="anchored" data-anchor-id="testing-og-sammenligning-av-de-ulike-modellene"><span class="header-section-number">13.5</span> Testing og sammenligning av de ulike modellene</h2>
<p>Vi skal nå teste og sammenligne de ulike modellene for å avgjøre hvilken som er mest passende.Vi bruker en likelihood ratio test til å sammenligne to modeller for å vurdere om den mer komplekse modellen gir en signifikant forbedring i modelltilpasning. I dette tilfellet har alle de romlige modellene (SEM, SDEM og SLX) signifikant lavere AIC og høyere log-likelihood enn OLS-modellen, noe som indikerer at de passer bedre til dataene.</p>
<p>SEM-modellen (AIC = 51 436) og SLX-modellen (AIC = 51 409) har begge lavere AIC-verdier enn SDEM-modellen (AIC = 51,502). AIC er et mål på modellens kvalitet, der lavere verdier indikerer en bedre modell som balanserer god tilpasning og modellkompleksitet.</p>
<p>SLX-modellen har den laveste AIC (51 409), noe som antyder at den gir den beste balansen mellom modelltilpasning og kompleksitet sammenlignet med de andre modellene. Log-likelihood er også høyest for SLX-modellen (-25,683.28), som bekrefter at den gir den beste tilpasningen til dataene.</p>
<p>Basert på AIC, log-likelihood, og likelihood ratio test ser SLX-modellen ut til å være den beste modellen for dette datasettet, siden den har den laveste AIC og høyeste log-likelihood. Selv om SEM-modellen også gir en betydelig forbedring i forhold til OLS og SDEM-modellen, indikerer AIC og log-likelihood at SLX-modellen gir den beste balansen mellom tilpasning og kompleksitet.</p>
</section>
</section>
<section id="fjerner-modellene-spatial-effects" class="level1" data-number="14">
<h1 data-number="14"><span class="header-section-number">14</span> Fjerner modellene “spatial effects”?</h1>
<p>For å evaluere hvor godt de ulike modellene (OLS, SEM, SAR, SDEM og SLX) håndterer “spatial effects” har vi benyttet Moran’s I-plot på residualene fra hver modell med k=10 nærmeste naboer. Moran-plottene gir oss innsikt i hvorvidt modellene klarer å fjerne romlige effekter fra residualene og dermed oppnå en modelltilpasning som ikke er påvirket av spatial autokorrelasjon.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Beregn residualene for SDEM-modellen</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>residuals_sdem <span class="ot">&lt;-</span> <span class="fu">residuals</span>(SDEM)</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Beregn residualene for SEM-modellen</span></span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>residuals_sem <span class="ot">&lt;-</span> <span class="fu">residuals</span>(SEM)</span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Beregn residualene for SLX-modellen</span></span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a>residuals_slx <span class="ot">&lt;-</span> <span class="fu">residuals</span>(SLX)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">moran.plot</span>(residuals_sdem, <span class="at">listw =</span> lw10, <span class="at">main =</span> <span class="st">"Moran's I for SDEM-residualer (k=10)"</span>)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-8" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-8-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="arbeidskrav_files/figure-html/fig-8-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-8-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figur&nbsp;8: Moran-plot for SDEM-modellen (k=10)
</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">moran.plot</span>(residuals_sem, <span class="at">listw =</span> lw10, <span class="at">main =</span> <span class="st">"Moran's I for SEM-residualer (k=10)"</span>)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-9" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-9-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="arbeidskrav_files/figure-html/fig-9-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-9-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figur&nbsp;9: Moran-plot for SEM-modellen (k=10)
</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">moran.plot</span>(residuals_slx, <span class="at">listw =</span> lw10, <span class="at">main =</span> <span class="st">"Moran's I for SLX-residualer (k=10)"</span>)</span></code><button title="Kopier til utklipstavle" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-10" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-10-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="arbeidskrav_files/figure-html/fig-10-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-10-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figur&nbsp;10: Moran-plot for SLX-modellen (k=10)
</figcaption>
</figure>
</div>
</div>
</div>
<section id="sem-modellen-spatial-error-model" class="level2" data-number="14.1">
<h2 data-number="14.1" class="anchored" data-anchor-id="sem-modellen-spatial-error-model"><span class="header-section-number">14.1</span> SEM-modellen (Spatial Error Model)</h2>
<p><a href="#fig-9" class="quarto-xref">Figur&nbsp;9</a> viser Moran-plottet for SEM-residualene. Dette plottet viser en klar forbedring sammenlignet med OLS. Residualene er mer spredt, og det er mindre tydelig clustering i første og tredje kvadrant. Dette indikerer at SEM-modellen har klart å fange opp en stor del av den spatial autokorrelasjonen som var til stede i OLS-modellen. Den flatere linjen i plottet viser at det er mindre romlig autokorrelasjon igjen i residualene, noe som tyder på at SEM-modellen har vært effektiv i å redusere romlig avhengighet i feilene.</p>
</section>
<section id="sdem-modellen-spatial-durbin-error-model" class="level2" data-number="14.2">
<h2 data-number="14.2" class="anchored" data-anchor-id="sdem-modellen-spatial-durbin-error-model"><span class="header-section-number">14.2</span> SDEM-modellen (Spatial Durbin Error Model)</h2>
<p><a href="#fig-8" class="quarto-xref">Figur&nbsp;8</a> viser Moran`s-plottet for SDEM-residualene. Dette plottet viser et lignende mønster som SEM-modellen, med spredte residualer og mindre clustering. Dette bekrefter at også SDEM-modellen håndterer spatial autokorrelasjon godt, og at den fanger opp både direkte og indirekte romlige effekter. Linjen i plottet er fortsatt noe stigende, men det er færre ekstreme verdier sammenlignet med OLS. SDEM-modellen ser ut til å være minst like effektiv som SEM i å håndtere romlige avhengigheter.</p>
</section>
<section id="slx-modellen-spatial-lag-of-x-model" class="level2" data-number="14.3">
<h2 data-number="14.3" class="anchored" data-anchor-id="slx-modellen-spatial-lag-of-x-model"><span class="header-section-number">14.3</span> SLX-modellen (Spatial Lag of X Model)</h2>
<p><a href="#fig-10" class="quarto-xref">Figur&nbsp;10</a> viser Moran-plott for SLX-residualene. Dette plottet viser at modellen klarer å redusere noe av den spatial autokorrelasjonen, men ikke i like stor grad som SEM eller SDEM. Det er fortsatt en viss clustering synlig, spesielt i første og tredje kvadrant, noe som tyder på at SLX-modellen ikke fullt ut håndterer romlig avhengighet i dataene. Sammenlignet med OLS er SLX en forbedring, men den flate linjen er ikke like tydelig som i SEM- eller SDEM-plottene. Dette indikerer at SLX-modellen er mindre effektiv når det gjelder å fjerne spatial autokorrelasjon i residualene.</p>
<p>Konklusjonen er at SEM og SDEM-modellene fjerner spatial autokorrelasjon best, med SEM som en lett overlegen modell, mens OLS sliter mest med å håndtere de romlige effektene. SLX-modellen klarer å redusere noe av den spatial avhengigheten, men ikke i like stor grad som SEM og SDEM.</p>
</section>
</section>
<section id="diskusjon-av-resultatene" class="level1" data-number="15">
<h1 data-number="15"><span class="header-section-number">15</span> Diskusjon av resultatene</h1>
<p>For denne diskusjonen vil vi fokusere på den hedoniske boligprismodellen, som er en metode for å estimere implisitte priser på boligens egenskaper, slik som størrelse, beliggenhet og sosioøkonomiske faktorer. Hver modell (OLS, SEM, SAR, SLX og SDEM) har blitt brukt for å undersøke hvordan disse egenskapene påvirker boligprisene, og gir oss innsikt i ulike aspekter av romlige avhengigheter.</p>
<section id="økonomisk-tolkning-av-den-hedoniske-boligprismodellen" class="level2" data-number="15.1">
<h2 data-number="15.1" class="anchored" data-anchor-id="økonomisk-tolkning-av-den-hedoniske-boligprismodellen"><span class="header-section-number">15.1</span> Økonomisk tolkning av den hedoniske boligprismodellen</h2>
<p>Den hedoniske modellen antar at boligens pris er et resultat av dens unike egenskaper. Modellen dekomponerer prisen slik at vi kan se hvor mye av prisen som skyldes spesifikke attributter, som antall soverom, boligstørrelse, og lokalsamfunnets egenskaper. I en hedonisk boligprismodell betyr koeffisientene de implisitte prisene på de enkelte egenskapene. For eksempel vil en positiv koeffisient for “sqft_living” indikere at større boliger, alt annet likt, er forbundet med høyere priser.</p>
</section>
<section id="i-ols-modellen-kan-vi-tolke-to-utvalgte-koeffisienter-med-tanke-på-den-hedoniske-teorien" class="level2" data-number="15.2">
<h2 data-number="15.2" class="anchored" data-anchor-id="i-ols-modellen-kan-vi-tolke-to-utvalgte-koeffisienter-med-tanke-på-den-hedoniske-teorien"><span class="header-section-number">15.2</span> I OLS-modellen kan vi tolke to utvalgte koeffisienter med tanke på den hedoniske teorien</h2>
<ol type="1">
<li><p>Koeffisient forbedrooms: Denne koeffisienten viser hvordan antall soverom påvirker boligprisen. Et negativt estimat indikerer at flere soverom faktisk kan redusere boligprisen når andre faktorer holdes konstant, noe som kan tolkes som at større boligareal (representert ved andre variabler som sqft_living) er viktigere enn antall soverom i å forklare prisøkning.</p></li>
<li><p>Koeffisient forsqft_living: Dette måler effekten av boareal på prisen og har en positiv koeffisient, som forventet. Økt boareal fører til en økning i pris, noe som er i tråd med den hedoniske teorien om at større boliger har høyere verdi på grunn av økt funksjonalitet og komfort.</p></li>
</ol>
</section>
<section id="i-sdem-modellen-kan-vi-tolke-to-utvalgte-koeffisienter-med-tanke-på-den-hedoniske-teorien" class="level2" data-number="15.3">
<h2 data-number="15.3" class="anchored" data-anchor-id="i-sdem-modellen-kan-vi-tolke-to-utvalgte-koeffisienter-med-tanke-på-den-hedoniske-teorien"><span class="header-section-number">15.3</span> I SDEM-modellen kan vi tolke to utvalgte koeffisienter med tanke på den hedoniske teorien</h2>
<ol type="1">
<li>Koeffisient for sqft_living (boareal):</li>
</ol>
<ul>
<li>Direkte effekt: Den positive og signifikante direkte effekten (p-verdi &lt; 2.22e-16) indikerer at økt boareal innenfor enheten gir en økning i boligprisen. Dette stemmer godt med den hedoniske teorien, som sier at større boliger har høyere verdi.</li>
<li>Indirekte effekt: Den positive og signifikante indirekte effekten antyder også at boareal i naboområder påvirker boligprisen, noe som kan indikere en viss “nabolagseffekt” der større boliger i nærheten øker den generelle prisnivået i området.</li>
</ul>
<ol start="2" type="1">
<li>Koeffisient for bedrooms (antall soverom):</li>
</ol>
<ul>
<li>Direkte effekt: Den negative og signifikante direkte effekten (p-verdi 7.76e-13) antyder at et høyere antall soverom, når andre faktorer holdes konstant, kan redusere boligprisen. Dette kan tolkes som at boareal er viktigere enn antall rom i å bestemme verdien.</li>
<li>Indirekte effekt: Den indirekte effekten er også negativ og signifikant (p-verdi 0.003009), noe som betyr at flere soverom i nærområdet kan ha en negativ effekt på boligprisen, kanskje på grunn av preferanser for å unngå områder med mange små, trange boliger.</li>
</ul>
</section>
<section id="i-sem-spatial-error-model-kan-vi-tolke-to-utvalgte-koeffisienter-med-tanke-på-den-hedoniske-teorien" class="level2" data-number="15.4">
<h2 data-number="15.4" class="anchored" data-anchor-id="i-sem-spatial-error-model-kan-vi-tolke-to-utvalgte-koeffisienter-med-tanke-på-den-hedoniske-teorien"><span class="header-section-number">15.4</span> I SEM (Spatial Error Model) kan vi tolke to utvalgte koeffisienter med tanke på den hedoniske teorien</h2>
<ol type="1">
<li>Koeffisient for sqft_living (boareal):</li>
</ol>
<ul>
<li>Den positive og svært signifikante koeffisienten (p-verdi &lt; 2.2e-16) indikerer at økt boareal er assosiert med høyere boligpris. Dette er i samsvar med den hedoniske teorien, som sier at større boareal gir økt verdi fordi det gir mer funksjonalitet og komfort.</li>
</ul>
<ol start="2" type="1">
<li>Koeffisient for bedrooms (antall soverom):</li>
</ol>
<ul>
<li>Den negative og signifikante koeffisienten (p-verdi 1.012e-10) antyder at flere soverom, når andre faktorer som boareal holdes konstant, kan redusere boligprisen. Dette kan indikere at boligkjøpere verdsetter boareal mer enn antall rom, som antyder at prisøkning er mer knyttet til den totale størrelsen enn rominndelingen.</li>
</ul>
<section id="i-slx-spatial-lag-of-x-modellen-kan-vi-tolke-to-utvalgte-koeffisienter-med-tanke-på-den-hedoniske-teorien" class="level3" data-number="15.4.1">
<h3 data-number="15.4.1" class="anchored" data-anchor-id="i-slx-spatial-lag-of-x-modellen-kan-vi-tolke-to-utvalgte-koeffisienter-med-tanke-på-den-hedoniske-teorien"><span class="header-section-number">15.4.1</span> I SLX (Spatial Lag of X) modellen kan vi tolke to utvalgte koeffisienter med tanke på den hedoniske teorien</h3>
<ol type="1">
<li>Koeffisient for sqft_living (boareal):</li>
</ol>
<ul>
<li>Den direkte koeffisienten for sqft_living er positiv og svært signifikant (p-verdi &lt; 2.2e-16), noe som viser at større boareal øker boligprisen, i tråd med hedonisk teori. Den positive effekten bekrefter at boligkjøpere verdsetter større boareal.</li>
<li>Den romlige effekten (lagged sqft_living) er også negativ og signifikant (p-verdi 6.383e-09), noe som kan tyde på at økt boareal i nærområdet har en negativ effekt på boligprisen for en gitt bolig, noe som potensielt reflekterer økt konkurranse eller metning i markedet.</li>
</ul>
<ol start="2" type="1">
<li>Koeffisient for bedrooms (antall soverom):</li>
</ol>
<ul>
<li>Den direkte effekten for bedrooms er negativ og signifikant (p-verdi 2.787e-13), noe som indikerer at flere soverom kan redusere verdien når andre faktorer som boareal holdes konstant. Dette er i tråd med funn i tidligere modeller som antyder at boligkjøpere vektlegger total størrelse mer enn antall rom.</li>
<li>Den romlige effekten (lag.bedrooms) er negativ, men ikke signifikant, noe som betyr at antall soverom i nærområdet ikke har en statistisk signifikant effekt på boligprisen.</li>
</ul>
</section>
</section>
<section id="ut-fra-resultatene-for-sar-modellen-kan-vi-tolke-de-implisitte-prisene-for-to-utvalgte-variabler.-vi-tar-for-oss-variablene-sqft_living-boareal-og-bedrooms-antall-soverom." class="level2" data-number="15.5">
<h2 data-number="15.5" class="anchored" data-anchor-id="ut-fra-resultatene-for-sar-modellen-kan-vi-tolke-de-implisitte-prisene-for-to-utvalgte-variabler.-vi-tar-for-oss-variablene-sqft_living-boareal-og-bedrooms-antall-soverom."><span class="header-section-number">15.5</span> Ut fra resultatene for SAR-modellen kan vi tolke de implisitte prisene for to utvalgte variabler. Vi tar for oss variablene sqft_living (boareal) og bedrooms (antall soverom).</h2>
<ol type="1">
<li>sqft_living (boareal):</li>
</ol>
<ul>
<li>Den direkte effekten for sqft_living er positiv (ca. 273–276), noe som betyr at en økning i boareal i en enkelt bolig gir en positiv innvirkning på prisen til denne boligen. Denne effekten er i samsvar med hedonisk teori, som tilsier at større boareal gjør boligen mer verdifull og dermed øker prisen.</li>
<li>Den indirekte effekten er også positiv (ca. 114–194), noe som indikerer at økning i boareal i nærliggende boliger også har en positiv påvirkning på prisen til en gitt bolig. Dette kan skyldes at større boliger i et område gjør hele området mer attraktivt, noe som gjenspeiles i høyere priser generelt.</li>
<li>Den totale effekten (ca. 470–688) viser den samlede virkningen av både direkte og indirekte effekter, og den høye verdien bekrefter at boareal er en svært verdifull faktor i prissettingen av boliger.</li>
</ul>
<ol start="2" type="1">
<li>bedrooms (antall soverom):</li>
</ol>
<ul>
<li><p>Den direkte effekten for bedrooms er negativ (ca. -43,000 til -45,000), som betyr at et høyere antall soverom, når andre faktorer holdes konstant, kan redusere boligprisen. Dette kan tolkes som at boligkjøpere i dette markedet prioriterer boareal over antall rom, og at de kanskje foretrekker større, åpne områder fremfor flere rom.</p></li>
<li><p>Den indirekte effekten er også negativ (ca. -29,000 til -65,000), noe som antyder at flere soverom i nærliggende boliger har en negativ påvirkning på prisen til en gitt bolig. Dette kan skyldes at mange små rom i nærområdet kan indikere mindre attraktive boligtyper, som kanskje oppfattes som mindre verdifulle.</p></li>
<li><p>Den totale effekten (ca. -72,000 til -109,000) reflekterer den samlede negative virkningen av både direkte og indirekte effekter, noe som understreker at antall soverom har en mindre positiv rolle i boligprissetting sammenlignet med boareal. &gt;&gt;&gt;&gt;&gt;&gt;&gt; b15bbbfbdd1ceaf89d651f291d990edbb8a1dadf</p></li>
</ul>
</section>
</section>
<section id="konklusjon-3" class="level1" data-number="16">
<h1 data-number="16"><span class="header-section-number">16</span> Konklusjon</h1>
<p>Den hedoniske boligprismodellen gir innsikt i hvordan boligkjøpere verdsetter ulike boligelementer, og ved å anvende romlige modeller som SAR, SEM, SLX og SDEM får vi bedre forståelse av de økonomiske effektene av både lokale og globale romlige forhold. Analysene viser at boligens areal (sqft_living) er konsekvent positivt korrelert med pris, mens demografiske variabler som andel_hvit_alene kan ha både direkte og indirekte effekter avhengig av modellvalg.</p>
<p>Gjennom analysen av romlige avhengigheter i boligprisdata med modeller som OLS, SEM, SAR, SDEM og SLX, avdekkes at OLS-modellen ikke klarer å håndtere romlig autokorrelasjon, noe som fører til skjevhet i residualene. SEM og SDEM-modellene er mer effektive i å fange opp og redusere romlige effekter, med SDEM som den mest pålitelige modellen for å vurdere økonomiske effekter av både lokale og nabopåvirkninger. Selv om SLX-modellen viser en viss forbedring, er den ikke like effektiv som SEM og SDEM.</p>
<p>Evalueringen av modellene gjennom AIC og log-likelihood indikerer at SLX gir en god balanse mellom tilpasning og kompleksitet, men både SEM og SDEM gir betydelige forbedringer sammenlignet med OLS. Samlet sett understreker analysen viktigheten av å bruke romlige modeller for å oppnå mer nøyaktige og pålitelige estimater i boligmarkedet, noe som er avgjørende for informerte beslutninger og effektiv politikk.”</p>
</section>
<section id="referanser" class="level1 unnumbered" data-number="17">


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">17 Referanser</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-anselin1988" class="csl-entry" role="listitem">
Anselin, Luc. 1988. <em>Spatial Econometrics: Methods and Models.</em> Springer Netherlands.
</div>
<div id="ref-lesage" class="csl-entry" role="listitem">
LeSage, James P. u.å. <em>What Regional Scientists Need to Know about Spatial Econometrics</em>.
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Kopiert!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Kopiert!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>